"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"grid",version:"0.0.12"},function(){var o=function(){var o,n=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,frozenColumnIndex:0,frozenRowIndex:0,showLineNumber:!1,showRowSelector:!1,multipleSelect:!1,height:0,columnMinWidth:100,lineNumberColumnWidth:30,rowSelectorColumnWidth:25,sortable:!1,header:{columnHeight:25,columnPadding:3,columnBorderWidth:1},body:{columnHeight:25,columnPadding:3,columnBorderWidth:1},rightSum:!1,footSum:!1,page:{height:25,display:!0,navigationItemCount:5},scroller:{size:15,barMinSize:15},columnKeys:{selected:"_SELECTED"}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0},this.columns=[],this.colGroup=[],this.footSum=[],this.list=[],this.page={},this.sortInfo={},this.focusedColumn={},this.selectedColumn={},this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowMap={},this.leftHeaderData={},this.headerData={},this.rightHeaderData={},this.footSumTable={},o=this.config;var a=function(){var e={instanceId:this.id};return this.$target.html(t.tmpl.get("main",e)),this.$={container:{hidden:this.$target.find('[data-ax5grid-container="hidden"]'),root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),page:this.$target.find('[data-ax5grid-container="page"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},livePanelKeys:[],scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')},page:{navigation:this.$target.find('[data-ax5grid-page="navigation"]'),status:this.$target.find('[data-ax5grid-page="status"]')},form:{clipboard:this.$target.find('[data-ax5grid-form="clipboard"]')},resizer:{vertical:this.$target.find('[data-ax5grid-resizer="vertical"]'),horizontal:this.$target.find('[data-ax5grid-resizer="horizontal"]')}},this.$.container.root.css({height:this.gridConfig.height}),this},l=function(e){this.columns=i.deepCopy(e),this.headerTable=t.util.makeHeaderTable.call(this,this.columns),this.xvar.frozenColumnIndex=o.frozenColumnIndex>this.columns.length?this.columns.length:o.frozenColumnIndex,this.bodyRowTable=t.util.makeBodyRowTable.call(this,this.columns),this.bodyRowMap=t.util.makeBodyRowMap.call(this,this.bodyRowTable),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight;for(var n={},a=0,l=this.headerTable.rows.length;l>a;a++)for(var r=this.headerTable.rows[a],s=0,d=r.cols.length;d>s;s++)n[r.cols[s].colIndex]=jQuery.extend({},r.cols[s]);this.colGroup=[];for(var c in n)this.colGroup.push(n[c]);return this},r=function(){l.call(this,this.config.columns),s.call(this),c.call(this,!0),t.header.repaint.call(this),t.body.repaint.call(this,!0),t.scroller.resize.call(this)},s=function(){var t,e,o,n=this.$.container.root.width(),a=0,l=[],r=this.colGroup;for(e=0,o=r.length;o>e;e++)i.isNumber(r[e].width)?a+=r[e]._width=r[e].width:"*"===r[e].width?l.push(e):"%"===i.right(r[e].width,1)&&(a+=r[e]._width=n*i.left(r[e].width,"%")/100);if(l.length>0)for(t=(n-a)/l.length,e=0,o=l.length;o>e;e++)r[l[e]]._width=t},d=function(e){i.isArray(e)?(this.footSum=e,this.footSumTable=t.util.makeFootSumTable.call(this,this.footSum)):(this.footSum=[],this.footSumTable={})},c=function(t){var e,i,n=this.$.container.root.width(),a=this.$.container.root.height(),l=n,r=a,s=o.asidePanelWidth=function(){var t=0;return o.showLineNumber&&(t+=o.lineNumberColumnWidth),o.showRowSelector&&(t+=o.rowSelectorColumnWidth),t}(),d=o.frozenPanelWidth=function(t,e){for(var i=0,o=0,n=e;n>o;o++)i+=t[o]._width;return i}(this.colGroup,o.frozenColumnIndex),c=0,h=function(t){return o.frozenRowIndex*t}(this.xvar.bodyTrHeight),u=function(t){return this.footSum.length*t}.call(this,this.xvar.bodyTrHeight),g=this.headerTable.rows.length*o.header.columnHeight,x=o.page.display?o.page.height:0;(function(){e=a-g-x-u<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0,i=function(){for(var t=0,i=n-s-e,o=0,a=this.colGroup.length;a>o;o++)t+=this.colGroup[o]._width;return t>i?this.config.scroller.size:0}.call(this),i>0&&(e=a-g-x-u-i<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0)}).call(this),l=n-e,r=a-x-i;var f=r-g,p=function(t,e,i,n){var a={},r=!1;switch(i){case"aside":0===s?r=!0:(a.left=0,a.width=s);break;case"left":0===o.frozenColumnIndex?r=!0:(a.left=s,a.width=d);break;case"right":o.rightSum||(r=!0);break;default:"page"!==n&&(0===o.frozenColumnIndex?a.left=s:a.left=d+s,a.width=l-s-d-c)}if(r)return this;if("body"===n)switch(e){case"top":0==o.frozenRowIndex?r=!0:(a.top=0,a.height=h);break;case"bottom":o.footSum?(a.top=f-u,a.height=u):r=!0;break;default:a.top=h,a.height=f-h-u}else"header"===n?a.height=g:"page"===n&&(0==x?r=!0:a.height=x);return r?(t.hide(),this):(t.css(a),this)},v=function(t,e,i,o){var n={},a=!1;switch(o){case"vertical":e>0?(n.width=e,n.height=r,n.bottom=i+x):a=!0;break;case"horizontal":i>0?(n.width=l,n.height=i,n.right=e,n.bottom=x):a=!0;break;case"corner":e>0&&i>0?(n.width=e,n.height=i,n.bottom=x):a=!0}return a?(t.hide(),this):void t.show().css(n)};this.$.container.header.css({height:g}),this.$.container.body.css({height:f}),p.call(this,this.$.panel["aside-header"],"","aside","header"),p.call(this,this.$.panel["left-header"],"","left","header"),p.call(this,this.$.panel.header,"","","header"),p.call(this,this.$.panel["right-header"],"","right","header"),p.call(this,this.$.panel["top-aside-body"],"top","aside","body"),p.call(this,this.$.panel["top-left-body"],"top","left","body"),p.call(this,this.$.panel["top-body"],"top","","body"),p.call(this,this.$.panel["top-right-body"],"top","right","body"),p.call(this,this.$.panel["aside-body"],"","aside","body"),p.call(this,this.$.panel["left-body"],"","left","body"),p.call(this,this.$.panel.body,"","","body"),p.call(this,this.$.panel["right-body"],"","right","body"),p.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),p.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),p.call(this,this.$.panel["bottom-body"],"bottom","","body"),p.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),v.call(this,this.$.scroller.vertical,e,i,"vertical"),v.call(this,this.$.scroller.horizontal,e,i,"horizontal"),v.call(this,this.$.scroller.corner,e,i,"corner"),p.call(this,this.$.container.page,"","","page")},h=function(e){t.header.repaint.call(this),t.data.sort.call(this,e),t.body.repaint.call(this,!0),t.scroller.resize.call(this)};this.init=function(e){this.onStateChanged=o.onStateChanged,this.onClick=o.onClick;var r=this.gridConfig=jQuery.extend(!0,{},o,e);if(!r.target)return console.log(ax5.info.getError("ax5grid","401","init")),this;this.$target=jQuery(r.target),this.gridConfig.height||(this.gridConfig.height=this.$target.height()),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+ax5.getGuid(),this.$target.data("data-ax5grid-id",r.id)),function(t){i.isObject(t)&&!t.error&&(r=jQuery.extend(!0,r,t))}(i.parseJson(this.$target.attr("data-ax5grid-config"),!0)),a.call(this),l.call(this,r.columns),s.call(this),d.call(this,r.footSum),c.call(this,!0),t.header.init.call(this),t.header.repaint.call(this),t.body.init.call(this),t.body.repaint.call(this),t.scroller.init.call(this),t.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.instanceId,function(){c.call(this),t.scroller.resize.call(this)}.bind(this)),jQuery(document.body).on("click.ax5grid-"+this.instanceId,function(e){var o=i.findParentNode(e.target,{"data-ax5grid-container":"root"});o?n.focused=!0:(n.focused=!1,t.body.blur.call(n))});var h={33:"KEY_PAGEUP",34:"KEY_PAGEDOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_LEFT",38:"KEY_UP",39:"KEY_RIGHT",40:"KEY_DOWN"};return jQuery(window).on("keydown.ax5grid-"+this.instanceId,function(t){n.focused&&(t.metaKey||t.ctrlKey?67==t.which&&n.copySelect():h[t.which]&&n.keyDown(h[t.which],t))}),this},this.align=function(){return c.call(this),t.scroller.resize.call(this),this},this.keyDown=function(){var e={KEY_UP:function(){t.body.moveFocus.call(this,"UP")},KEY_DOWN:function(){t.body.moveFocus.call(this,"DOWN")},KEY_LEFT:function(){t.body.moveFocus.call(this,"LEFT")},KEY_RIGHT:function(){t.body.moveFocus.call(this,"RIGHT")},KEY_HOME:function(){t.body.moveFocus.call(this,"HOME")},KEY_END:function(){t.body.moveFocus.call(this,"END")}};return function(t,i){return t in e&&e[t].call(this,i),this}}(),this.copySelect=function(){var t,e,i,o,n=this.$.form.clipboard,a=[],l="",r=0;for(var s in this.selectedColumn){var d=this.selectedColumn[s];if(d){"undefined"==typeof o&&(o=d.dindex,e=d.rowIndex,i=d.rowIndex),(o!=d.dindex||e!=d.rowIndex)&&r++,a[r]||(a[r]=[]);var c=this.bodyRowMap[d.rowIndex+"_"+d.colIndex];c?a[r].push(this.list[d.dindex][c.key]):a[r].push(""),o=d.dindex,e=d.rowIndex}}a.forEach(function(t){l+=t.join("	")+"\n"}),n.get(0).innerText=l,n.select();try{t=document.execCommand("copy")}catch(h){t=!1}return t},this.setData=function(e){return t.data.set.call(this,e),c.call(this),t.body.repaint.call(this),t.scroller.resize.call(this),t.page.navigationUpdate.call(this),t.body.scrollTo.call(this,{top:0}),this},this.setHeight=function(e){return"100%"==e&&(e=this.$target.offsetParent().innerHeight()),this.$target.css({height:e}),this.$.container.root.css({height:e}),c.call(this),t.body.repaint.call(this,"reset"),t.scroller.resize.call(this),this},this.align=function(){return c.call(this),this},this.addRow=function(e,i){return t.data.add.call(this,e,i),c.call(this),t.body.repaint.call(this,"reset"),t.body.moveFocus.call(this,"END"),t.scroller.resize.call(this),this},this.removeRow=function(e){return t.data.remove.call(this,e),c.call(this),t.body.repaint.call(this,"reset"),t.body.moveFocus.call(this,"END"),t.scroller.resize.call(this),this},this.updateRow=function(e,i){return t.data.update.call(this,e,i),c.call(this),t.body.repaint.call(this,"reset"),t.body.moveFocus.call(this,i),t.scroller.resize.call(this),this},this.addColumn=function(){var t={first:function(t){this.config.columns=[].concat(t).concat(this.config.columns)},last:function(t){this.config.columns=this.config.columns.concat([].concat(t))}};return function(e,o){if("undefined"==typeof e)throw"_column must not be null";if("undefined"==typeof o&&(o="last"),o in t)t[o].call(this,e);else{if(!i.isNumber(o))throw"invalid argument _cindex";this.config.columns.splice(o,[].concat(e))}return r.call(this),this}}(),this.removeColumn=function(){var t={first:function(t){this.config.columns.splice(t,1)},last:function(){this.config.columns.splice(this.config.columns.length-1,1)}};return function(e){if("undefined"==typeof e&&(e="last"),e in t)t[e].call(this,e);else{if(!i.isNumber(e))throw"invalid argument _cindex";this.config.columns.splice(e,1)}return r.call(this),this}}(),this.updateColumn=function(t,e){if(!i.isNumber(e))throw"invalid argument _cindex";return this.config.columns.splice(e,1,t),r.call(this),this},this.setColumnWidth=function(e,i){return this.colGroup[this.xvar.columnResizerIndex]._width=e,t.header.repaint.call(this),t.body.repaint.call(this,!0),t.scroller.resize.call(this),c.call(this),this},this.getColumnSort=function(){return{}},this.setColumnSort=function(e){return"undefined"!=typeof e&&(this.sortInfo=e,t.header.applySortStatus.call(this,e)),h.call(this,this.sortInfo),this},this.select=function(e){if(i.isNumber(e)){var o=e;this.config.multipleSelect||(t.body.updateRowState.call(this,["selectedClear"]),t.data.clearSelect.call(this)),t.data.select.call(this,o),t.body.updateRowState.call(this,["selected"],o)}return this},this.main=function(){e.grid_instance=e.grid_instance||[],e.grid_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return o}()),t=ax5.ui.grid}(),function(){var t=ax5.ui.grid,e=ax5.util,i={focusClear:function(){var t=this;for(var e in t.focusedColumn){var i=t.focusedColumn[e];i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-focused")}t.focusedColumn={}},clear:function(){var t=this;for(var e in t.selectedColumn){var i=t.selectedColumn[e];i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-selected")}t.selectedColumn={}},init:function(t){var e=this;i.focusClear.call(e),e.focusedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]={panelName:t.panelName,dindex:t.dindex,rowIndex:t.rowIndex,colIndex:t.colIndex,colspan:t.colspan},i.clear.call(e),e.xvar.selectedRange={start:[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],end:null},e.selectedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]=function(e){return e?!1:{panelName:t.panelName,dindex:t.dindex,rowIndex:t.rowIndex,colIndex:t.colIndex,colspan:t.colspan}}(e.selectedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]),this.$.panel[t.panelName].find('[data-ax5grid-tr-data-index="'+t.dindex+'"]').find('[data-ax5grid-column-rowindex="'+t.rowIndex+'"][data-ax5grid-column-colindex="'+t.colIndex+'"]').attr("data-ax5grid-column-focused","true").attr("data-ax5grid-column-selected","true")},update:function(t){var e,o,n,a,l=this;l.xvar.selectedRange.end=[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],i.clear.call(l);var r={r:{s:Math.min(l.xvar.selectedRange.start[0],l.xvar.selectedRange.end[0]),e:Math.max(l.xvar.selectedRange.start[0],l.xvar.selectedRange.end[0])},c:{s:Math.min(l.xvar.selectedRange.start[2],l.xvar.selectedRange.end[2]),e:Math.max(l.xvar.selectedRange.start[2]+l.xvar.selectedRange.start[3],l.xvar.selectedRange.end[2]+l.xvar.selectedRange.end[3])}};for(e=r.r.s;e<=r.r.e;e++)for(a=this.bodyRowTable.rows.length,n=0;a>n;n++)for(o=r.c.s;o<=r.c.e;o++){var s=[],d="";l.xvar.frozenRowIndex>e&&s.push("top"),l.xvar.frozenColumnIndex>o&&s.push("left"),s.push("body"),"top"!==s[0]&&s.push("scroll"),d=s.join("-"),l.selectedColumn[e+"_"+o+"_"+n]={panelName:d,dindex:e,rowIndex:n,colIndex:o,colspan:t.colspan},s=null,d=null}e=null,o=null,n=null;for(var c in l.selectedColumn){var h=l.selectedColumn[c];h&&l.$.panel[h.panelName].find('[data-ax5grid-tr-data-index="'+h.dindex+'"]').find('[data-ax5grid-column-rowindex="'+h.rowIndex+'"][data-ax5grid-column-colindex="'+h.colIndex+'"]').attr("data-ax5grid-column-selected","true")}}},o={on:function(t){var e=this;i.init.call(e,t),this.$.container.body.on("mousemove.ax5grid-"+this.instanceId,'[data-ax5grid-column-attr="default"]',function(){this.getAttribute("data-ax5grid-column-rowIndex")&&i.update.call(e,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))})}).on("mouseup.ax5grid-"+this.instanceId,function(){o.off.call(e)}).on("mouseleave.ax5grid-"+this.instanceId,function(){o.off.call(e)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){this.$.container.body.off("mousemove.ax5grid-"+this.instanceId).off("mouseup.ax5grid-"+this.instanceId).off("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},n=function(t,e,i){var o=this,n=this.config,a={selected:function(t){for(var e=this.$.livePanelKeys.length;e--;)this.$.panel[this.$.livePanelKeys[e]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",this.list[t][n.columnKeys.selected])},selectedClear:function(){for(var t=this.selectedDataIndexs.length;t--;)for(var e=this.selectedDataIndexs[t],i=this.$.livePanelKeys.length;i--;)this.$.panel[this.$.livePanelKeys[i]].find('[data-ax5grid-tr-data-index="'+e+'"]').attr("data-ax5grid-selected",!1),this.list[e][n.columnKeys.selected]=!1}};t.forEach(function(t){if(!a[t])throw"invaild state name";a[t].call(o,e,i)})},a=function(){var i=this;this.$.container.body.on("click","[data-ax5grid-column-attr]",function(){var e,o,a,l,r,s,d,c={"default":function(t){var e=i.bodyRowMap[t.rowIndex+"_"+t.colIndex],o={self:i,page:i.page,data:i.data,dindex:t.dindex,rowIndex:t.rowIndex,colIndex:t.colIndex,column:e,value:i.data[t.dindex][e.key]};i.config.body.onClick&&i.config.body.onClick.call(o)},rowSelector:function(e){t.data.select.call(i,e.dindex),n.call(i,["selected"],e.dindex)},lineNumber:function(t){}};e=this.getAttribute("data-ax5grid-panel-name"),o=this.getAttribute("data-ax5grid-column-attr"),a=Number(this.getAttribute("data-ax5grid-column-row")),l=Number(this.getAttribute("data-ax5grid-column-col")),s=Number(this.getAttribute("data-ax5grid-column-rowIndex")),d=Number(this.getAttribute("data-ax5grid-column-colIndex")),r=Number(this.getAttribute("data-ax5grid-data-index")),o in c&&c[o]({panelName:e,attr:o,row:a,col:l,dindex:r,rowIndex:s,colIndex:d})}),this.$.container.body.on("mouseover","tr",function(){return}),this.$.container.body.on("mousedown",'[data-ax5grid-column-attr="default"]',function(t){this.getAttribute("data-ax5grid-column-rowIndex")&&o.on.call(i,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))})}).on("dragstart",function(t){return e.stopEvent(t),!1}),l.call(this)},l=function(){var e=this.config,i=t.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.xvar.frozenColumnIndex);if(this.asideBodyRowData=function(t){for(var i={rows:[]},o=0,n=t.rows.length;n>o;o++)if(i.rows[o]={cols:[]},0===o){var a={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},l={};e.showLineNumber&&(l=jQuery.extend({},a,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),i.rows[o].cols.push(l)),e.showRowSelector&&(l=jQuery.extend({},a,{width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),i.rows[o].cols.push(l))}return i}.call(this,this.bodyRowTable),this.leftBodyRowData=i.leftData,this.bodyRowData=i.rightData,this.leftFootSumData={},this.footSumData={},this.config.footSum){var o=t.util.divideTableByFrozenColumnIndex(this.footSumTable,this.xvar.frozenColumnIndex);this.leftFootSumData=o.leftData,this.footSumData=o.rightData}},r=function(i){var o=this.config,n=this.list;i&&(l.call(this),this.xvar.paintStartRowIndex=void 0);var a=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex;if(this.xvar.dataRowCount===n.length&&this.xvar.paintStartRowIndex===a)return this;var r="undefined"==typeof this.xvar.paintStartRowIndex,s=this.asideBodyRowData,d=this.leftBodyRowData,c=this.bodyRowData,h=this.leftFootSumData,u=this.footSumData,g=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1;this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(this.list.length-this.xvar.frozenRowIndex),this.$.livePanelKeys=[];var x=function(i,a,l,s,d){var c=this.$.panel[i];if(!r&&!d)return this.$.livePanelKeys.push(i),!1;var h,u,g,x,f,p,v,m,b,y,w=[],I=function(){return"undefined"==typeof d||"undefined"==typeof d.paintStartRowIndex?(d={paintStartRowIndex:0,paintRowCount:s.length},!1):!0}(),_=function(i,o,a,l){if("__d-index__"===a)return o+1;if("__d-checkbox__"===a)return'<div class="checkBox"></div>';if(l){var r={key:a,value:i[a],index:o,list:n};return e.isFunction(l)?l.call(r):t.formatter[l].call(r)}return i[a]||"&nbsp;"};for(w.push('<table border="0" cellpadding="0" cellspacing="0">'),w.push("<colgroup>"),h=0,u=a.length;u>h;h++)w.push('<col style="width:'+a[h]._width+'px;"  />');for(w.push("<col  />"),w.push("</colgroup>"),g=d.paintStartRowIndex,x=function(){var t;return t=s.length,d.paintRowCount+d.paintStartRowIndex<t&&(t=d.paintRowCount+d.paintStartRowIndex),t}();x>g;g++)for(f=0,p=l.rows.length;p>f;f++){for(w.push('<tr class="tr-'+g%4+'" data-ax5grid-tr-data-index="'+g+'" data-ax5grid-selected="'+(s[g][o.columnKeys.selected]||"false")+'">'),v=0,m=l.rows[f].cols.length;m>v;v++)b=l.rows[f].cols[v],y=o.body.columnHeight*b.rowspan-o.body.columnBorderWidth,w.push("<td ",'data-ax5grid-panel-name="'+i+'" ','data-ax5grid-data-index="'+g+'" ','data-ax5grid-column-row="'+f+'" ','data-ax5grid-column-col="'+v+'" ','data-ax5grid-column-rowIndex="'+b.rowIndex+'" ','data-ax5grid-column-colIndex="'+b.colIndex+'" ','data-ax5grid-column-attr="'+(b.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[g+"_"+b.colIndex+"_"+b.rowIndex],this.selectedColumn[g+"_"+b.colIndex+"_"+b.rowIndex]),'colspan="'+b.colspan+'" ','rowspan="'+b.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,item:s[g],index:g})+" ":t.styleClass+" "),o.body.columnBorderWidth&&(i+="hasBorder "),v==m-1&&(i+="isLastColumn "),i}.call(this,b)+'" ','style="height: '+y+'px;min-height: 1px;">'),w.push(function(){var t=o.body.columnHeight-2*o.body.columnPadding-o.body.columnBorderWidth;return b.multiLine?'<span data-ax5grid-cellHolder="multiLine" style="height:'+y+"px;line-height: "+t+'px;">':'<span data-ax5grid-cellHolder="" style="height: '+(o.body.columnHeight-o.body.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),_.call(this,s[g],g,b.key,b.formatter),"</span>"),w.push("</td>");w.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+g+'" ','data-ax5grid-column-attr="default" ','style="height: '+o.body.columnHeight+'px;min-height: 1px;" ',"></td>"),w.push("</tr>")}return w.push("</table>"),I&&c.css({paddingTop:(d.paintStartRowIndex-this.xvar.frozenRowIndex)*d.bodyTrHeight}),c.html(w.join("")),this.$.livePanelKeys.push(i),!0},f=function(i,n,a,l,s){var d=this.$.panel[i];if(!r&&!s)return this.$.livePanelKeys.push(i),!1;var c,h,u,g,x,f,p,v,m=[],b=(function(){return"undefined"==typeof s||"undefined"==typeof s.paintStartRowIndex?(s={paintStartRowIndex:0,paintRowCount:l.length},!1):!0}(),function(i,o,n,a,l){if("undefined"==typeof o)return n;if("__d-index__"===o||"__d-checkbox__"===o)return"&nbsp;";if(a){var r,s={key:o,list:i};return r=e.isFunction(a)?a.call(s):t.collector[a].call(s),l?(s.value=r,e.isFunction(l)?a.call(s):t.formatter[l].call(s)):r}return"&nbsp;"});for(m.push('<table border="0" cellpadding="0" cellspacing="0">'),m.push("<colgroup>"),c=0,h=n.length;h>c;c++)m.push('<col style="width:'+n[c]._width+'px;"  />');for(m.push("<col  />"),m.push("</colgroup>"),u=0,g=a.rows.length;g>u;u++){for(m.push('<tr class="tr-sum">'),x=0,f=a.rows[u].cols.length;f>x;x++)p=a.rows[u].cols[x],v=o.body.columnHeight*p.rowspan-o.body.columnBorderWidth,m.push("<td ",'data-ax5grid-panel-name="'+i+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+x+'" ','data-ax5grid-column-rowIndex="'+u+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn["sum_"+p.colIndex+"_"+u],this.selectedColumn["sum_"+p.colIndex+"_"+u]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(t){var i="";return t.styleClass&&(i+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key,isFootSum:!0})+" ":t.styleClass+" "),o.body.columnBorderWidth&&(i+="hasBorder "),x==f-1&&(i+="isLastColumn "),i}.call(this,p)+'" ','style="height: '+v+'px;min-height: 1px;">'),m.push(function(){var t=o.body.columnHeight-2*o.body.columnPadding-o.body.columnBorderWidth;return p.multiLine?'<span data-ax5grid-cellHolder="multiLine" style="height:'+v+"px;line-height: "+t+'px;">':'<span data-ax5grid-cellHolder="" style="height: '+(o.body.columnHeight-o.body.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),b.call(this,l,p.key,p.label,p.collector,p.formatter),"</span>"),m.push("</td>");m.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="default" ','style="height: '+o.body.columnHeight+'px;min-height: 1px;" ',"></td>"),m.push("</tr>")}return m.push("</table>"),d.html(m.join("")),this.$.livePanelKeys.push(i),!0},p={paintStartRowIndex:a,paintRowCount:g,bodyTrHeight:this.xvar.bodyTrHeight};o.asidePanelWidth>0&&(this.xvar.frozenRowIndex>0&&x.call(this,"top-aside-body",this.asideColGroup,s,n.slice(0,this.xvar.frozenRowIndex)),x.call(this,"aside-body-scroll",this.asideColGroup,s,n,p),o.footSum),this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&x.call(this,"top-left-body",this.leftHeaderColGroup,d,n.slice(0,this.xvar.frozenRowIndex)),x.call(this,"left-body-scroll",this.leftHeaderColGroup,d,n,p),o.footSum&&f.call(this,"bottom-left-body",this.leftHeaderColGroup,h,n)),this.xvar.frozenRowIndex>0&&x.call(this,"top-body-scroll",this.headerColGroup,c,n.slice(0,this.xvar.frozenRowIndex)),x.call(this,"body-scroll",this.headerColGroup,c,n,p),o.footSum&&f.call(this,"bottom-body-scroll",this.headerColGroup,u,n,p),o.rightSum,this.xvar.paintStartRowIndex=a,this.xvar.paintRowCount=g,this.xvar.dataRowCount=n.length,t.page.statusUpdate.call(this)},s=function(t,e){var i=this.config;i.asidePanelWidth>0&&"top"in t&&this.$.panel["aside-body-scroll"].css({top:t.top}),this.xvar.frozenColumnIndex>0&&"top"in t&&this.$.panel["left-body-scroll"].css({top:t.top}),this.xvar.frozenRowIndex>0&&"left"in t&&this.$.panel["top-body-scroll"].css({left:t.left}),this.$.panel["body-scroll"].css(t),!e&&"top"in t&&r.call(this)},d=function(){i.focusClear.call(this),i.clear.call(this)},c=function(e){var o={UD:function(e){var o,n,a;for(var l in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[l],!0);break}for(n=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],i.focusClear.call(this),i.clear.call(this),e>0?o.rowIndex+(n.rowspan-1)+e>this.bodyRowTable.rows.length-1?(o.dindex=o.dindex+e,o.rowIndex=0,o.dindex>this.list.length-1&&(o.dindex=this.list.length-1)):o.rowIndex=o.rowIndex+e:o.rowIndex+e<0?(o.dindex=o.dindex+e,o.rowIndex=this.bodyRowTable.rows.length-1,o.dindex<0&&(o.dindex=0)):o.rowIndex=o.rowIndex+e,a=0;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(0==o.rowIndex||a%2==(e>0?0:1)?o.colIndex--:o.rowIndex--,!(o.rowIndex<=0&&o.colIndex<=0));)a++;o.panelName=function(){var t=[],e="";return this.xvar.frozenRowIndex>o.dindex&&t.push("top"),this.xvar.frozenColumnIndex>o.colIndex&&t.push("left"),t.push("body"),"top"!==t[0]&&t.push("scroll"),e=t.join("-")}.call(this),function(){o.dindex+1>this.xvar.frozenRowIndex&&(o.dindex<this.xvar.paintStartRowIndex?(s.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)):o.dindex+1>this.xvar.paintStartRowIndex+(this.xvar.paintRowCount-2)&&(s.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex-this.xvar.paintRowCount+3)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)))}.call(this),this.focusedColumn[o.dindex+"_"+o.rowIndex+"_"+o.colIndex]=o,this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true")},LR:function(e){var o,n,a=0,l=!1,r="";for(var d in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[d],!0);break}for(n=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],i.focusClear.call(this),i.clear.call(this),0>e?(o.colIndex=o.colIndex+e,o.colIndex<0&&(o.colIndex=0)):(o.colIndex=o.colIndex+(n.colspan-1)+e,o.colIndex>this.colGroup.length-1&&(o.colIndex=this.colGroup.length-1)),"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(o.rowIndex=0),a=0;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(o.colIndex--,!(o.rowIndex<=0&&o.colIndex<=0));)a++;o.panelName=function(){var t=[],e="";return this.xvar.frozenRowIndex>o.dindex&&t.push("top"),this.xvar.frozenColumnIndex>o.colIndex&&t.push("left"),t.push("body"),"top"!==t[0]&&(this.xvar.frozenColumnIndex<=o.colIndex&&(r=t.join("-"),l=!0),t.push("scroll")),e=t.join("-")}.call(this),function(){}.call(this),this.focusedColumn[o.dindex+"_"+o.rowIndex+"_"+o.colIndex]=o;var c=this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true");if(l){var h=function(){return c.position().left+c.outerWidth()>Math.abs(this.$.panel[o.panelName].position().left)+this.$.panel[r].width()?c.position().left+c.outerWidth()-this.$.panel[r].width():Math.abs(this.$.panel[o.panelName].position().left)>c.position().left?c.position().left:void 0}.call(this);"undefined"!=typeof h&&(t.header.scrollTo.call(this,{left:-h}),s.call(this,{left:-h}),t.scroller.resize.call(this))}},INDEX:function(e){var o,n,a;for(var l in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[l],!0);break}for(o||(o={rowIndex:0,colIndex:0}),n=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],i.focusClear.call(this),i.clear.call(this),"end"==e&&(e=this.list.length-1),o.dindex=e,o.rowIndex=0,a=0;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(0==o.rowIndex||a%2==(_dy>0?0:1)?o.colIndex--:o.rowIndex--,!(o.rowIndex<=0&&o.colIndex<=0));)a++;o.panelName=function(){var t=[],e="";return this.xvar.frozenRowIndex>o.dindex&&t.push("top"),this.xvar.frozenColumnIndex>o.colIndex&&t.push("left"),t.push("body"),"top"!==t[0]&&t.push("scroll"),
e=t.join("-")}.call(this),function(){o.dindex+1>this.xvar.frozenRowIndex&&(o.dindex<this.xvar.paintStartRowIndex?(s.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)):o.dindex+1>this.xvar.paintStartRowIndex+(this.xvar.paintRowCount-2)&&(s.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex-this.xvar.paintRowCount+3)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)))}.call(this),this.focusedColumn[o.dindex+"_"+o.rowIndex+"_"+o.colIndex]=o,this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true")}},n={UP:function(){o.UD.call(this,-1)},DOWN:function(){o.UD.call(this,1)},LEFT:function(){o.LR.call(this,-1)},RIGHT:function(){o.LR.call(this,1)},HOME:function(){o.INDEX.call(this,0)},END:function(){o.INDEX.call(this,"end")},position:function(t){o.INDEX.call(this,t)}};return e in n?(n[e].call(this),this):void n.position.call(this,e)};t.body={init:a,repaint:r,updateRowState:n,scrollTo:s,blur:d,moveFocus:c}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){for(var t=0,i=this.list.length;i--;)t+=e.number(this.list[i][this.key]);return t},o=function(){for(var t=0,i=this.list.length;i--;)t+=e.number(this.list[i][this.key]);return e.number(t/(this.list.length||1),{round:2})};t.collector={sum:i,avg:o}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){},o=function(i){var o=this,n=function(t){o.selectedDataIndexs=[];for(var e=0,i=t.length,n=[];i>e;e++)t[e][o.config.columnKeys.selected]&&o.selectedDataIndexs.push(e),n.push(jQuery.extend({},t[e]));return n};return e.isArray(i)?(this.page=null,this.list=n(i)):"page"in i&&(this.page=jQuery.extend({},i.page),this.list=n(i.list)),this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},n=function(){},a=function(i,o){var n={first:function(){this.list=[].concat(i).concat(this.list)},last:function(){this.list=this.list.concat([].concat(i))}};if("undefined"==typeof o&&(o="last"),o in n)n[o].call(this,i);else{if(!e.isNumber(o))throw"invalid argument _dindex";this.list.splice(o,[].concat(i))}return this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},l=function(i){var o={first:function(){this.list.splice(i,1)},last:function(){this.list.splice(this.list.length-1,1)}};if("undefined"==typeof i&&(i="last"),i in o)o[i].call(this,i);else{if(!e.isNumber(i))throw"invalid argument _dindex";this.list.splice(i,1)}return this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this},r=function(t,i){if(!e.isNumber(i))throw"invalid argument _dindex";this.list.splice(i,1,t)},s=function(){},d=function(){this.selectedDataIndexs=[]},c=function(t,e){var i=this.config;return"undefined"==typeof e?(this.list[t][i.columnKeys.selected]=!this.list[t][i.columnKeys.selected])&&this.selectedDataIndexs.push(t):(this.list[t][i.columnKeys.selected]=e)&&this.selectedDataIndexs.push(t),this.list[t][i.columnKeys.selected]},h=function(i){var o=[];for(var n in i)o[i[n].seq]={key:n,order:i[n].orderBy};o=e.filter(o,function(){return"undefined"!=typeof this});var a,l,r=0,s=o.length;return this.list.sort(function(t,e){for(r=0;s>r;r++){if(a=t[o[r].key],l=e[o[r].key],("undefined"==typeof a?"undefined":_typeof(a))!==("undefined"==typeof l?"undefined":_typeof(l))&&(a=""+a,l=""+l),l>a)return"asc"===o[r].order?-1:1;if(a>l)return"asc"===o[r].order?1:-1}}),this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,t.page.navigationUpdate.call(this),this};t.data={init:i,set:o,get:n,setValue:s,clearSelect:d,select:c,add:a,remove:l,update:r,sort:h}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){return e.number(this.value,{money:!0})};t.formatter={money:i}}(),function(){var t=ax5.ui.grid,e=ax5.util,i={on:function(o,n){var a=this,l=$(o),r=l.offset().left,s=a.$.container.root.offset().left;a.xvar.columnResizerIndex=n;var d={min:-a.colGroup[n]._width+2,max:a.colGroup[n+1]?a.colGroup[n+1]._width:a.$.container.root.width()-2};jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(e){var i=t.util.getMousePosition(e);a.xvar.__da=i.clientX-a.xvar.mousePosition.clientX,d.min>a.xvar.__da?a.xvar.__da=d.min:d.max<a.xvar.__da&&(a.xvar.__da=d.max),a.xvar.columnResizerLived||a.$.resizer.horizontal.addClass("live"),a.xvar.columnResizerLived=!0,a.$.resizer.horizontal.css({left:r+a.xvar.__da-s})}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){i.off.call(a),e.stopEvent(t)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){i.off.call(a),e.stopEvent(t)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){this.$.resizer.horizontal.removeClass("live"),this.xvar.columnResizerLived=!1,this.setColumnWidth(this.colGroup[this.xvar.columnResizerIndex]._width+this.xvar.__da,this.xvar.columnResizerIndex),jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},o=function(){var o=this;this.$.container.header.on("click","[data-ax5grid-column-attr]",function(t){var e=this.getAttribute("data-ax5grid-column-key"),i=this.getAttribute("data-ax5grid-column-colindex"),n=(this.getAttribute("data-ax5grid-column-rowindex"),o.colGroup[i]);e&&n&&(o.config.sortable||n.sortable)&&l.call(o,n.key)}),this.$.container.header.on("mousedown","[data-ax5grid-column-resizer]",function(n){var a=this.getAttribute("data-ax5grid-column-resizer");o.xvar.mousePosition=t.util.getMousePosition(n),i.on.call(o,this,Number(a)),e.stopEvent(n)}).on("dragstart",function(t){return e.stopEvent(t),!1})},n=function(){var i=this.config,o=this.colGroup,n=t.util.divideTableByFrozenColumnIndex(this.headerTable,this.config.frozenColumnIndex),a=this.asideHeaderData=function(t){for(var e=[],o={rows:[]},n=0,a=t.rows.length;a>n;n++)if(o.rows[n]={cols:[]},0===n){var l={label:"",colspan:1,rowspan:t.rows.length,key:"__dindex__",colIndex:null},r={};i.showLineNumber&&(r=jQuery.extend({},l,{label:"&nbsp;",width:i.lineNumberColumnWidth,_width:i.lineNumberColumnWidth}),e.push(r),o.rows[n].cols.push(r)),i.showRowSelector&&(r=jQuery.extend({},l,{label:"",width:i.rowSelectorColumnWidth,_width:i.rowSelectorColumnWidth}),e.push(r),o.rows[n].cols.push(r))}return this.asideColGroup=e,o}.call(this,this.headerTable),l=this.leftHeaderData=n.leftData,r=this.headerData=n.rightData;this.leftHeaderColGroup=o.slice(0,this.config.frozenColumnIndex),this.headerColGroup=o.slice(this.config.frozenColumnIndex);var s=function(t,n,a){var l=0,r=[];r.push('<table border="0" cellpadding="0" cellspacing="0">'),r.push("<colgroup>");for(var s=0,d=n.length;d>s;s++)r.push('<col style="width:'+n[s]._width+'px;"  />'),l+=n[s]._width;r.push("<col  />"),r.push("</colgroup>");for(var c=0,h=a.rows.length;h>c;c++){var u="";r.push('<tr class="'+u+'">');for(var g=0,x=a.rows[c].cols.length;x>g;g++){var f=a.rows[c].cols[g],p=i.header.columnHeight*f.rowspan-i.header.columnBorderWidth;r.push("<td ",'data-ax5grid-column-attr="'+(f.columnAttr||"default")+'" ','data-ax5grid-column-row="'+c+'" ','data-ax5grid-column-col="'+g+'" ',function(){return"undefined"!=typeof f.key?'data-ax5grid-column-key="'+f.key+'" ':""}(),'data-ax5grid-column-colindex="'+f.colIndex+'" ','data-ax5grid-column-rowindex="'+f.rowIndex+'" ','colspan="'+f.colspan+'" ','rowspan="'+f.rowspan+'" ','class="'+function(t){var o="";return t.styleClass&&(o+=e.isFunction(t.styleClass)?t.styleClass.call({column:t,key:t.key})+" ":t.styleClass+" "),i.header.columnBorderWidth&&(o+="hasBorder "),g==x-1&&(o+="isLastColumn "),o}.call(this,f)+'" ','style="height: '+p+'px;min-height: 1px;">'),r.push(function(){var t=i.header.columnHeight-2*i.header.columnPadding-i.header.columnBorderWidth;return'<span data-ax5grid-cellHolder="" style="height: '+(i.header.columnHeight-i.header.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),function(){var t="";return(!e.isNothing(f.key)&&!e.isNothing(f.colIndex)&&i.sortable||f.sortable)&&(t+='<span data-ax5grid-column-sort="'+f.colIndex+'" data-ax5grid-column-sort-order="'+(o[f.colIndex].sort||"")+'" />'),t}(),f.label||"&nbsp;","</span>"),e.isNothing(f.colIndex)||i.enableFilter&&r.push('<span data-ax5grid-column-filter="'+f.colIndex+'" data-ax5grid-column-filter-value=""  />'),r.push("</td>")}r.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','style="height: '+i.header.columnHeight+'px;min-height: 1px;" ',"></td>"),r.push("</tr>")}return r.push("</table>"),t.html(r.join("")),function(){for(var o=i.header.columnHeight*a.rows.length-i.header.columnBorderWidth,l=0,r=[],s=0,d=n.length;d>s;s++){var c=n[s];e.isNothing(c.colIndex)||(l+=c._width,r.push('<div data-ax5grid-column-resizer="'+c.colIndex+'" style="height:'+o+"px;left: "+(l-4)+'px;"  />'))}t.append(r)}.call(this),l};i.asidePanelWidth>0&&s(this.$.panel["aside-header"],this.asideColGroup,a),i.frozenColumnIndex>0&&s(this.$.panel["left-header"],this.leftHeaderColGroup,l),this.xvar.scrollContentWidth=s(this.$.panel["header-scroll"],this.headerColGroup,r),i.rightSum},a=function(t){return this.$.panel["header-scroll"].css(t),this},l=function(t){for(var e="",i={},o=0,n=0,a=this.colGroup.length;a>n;n++)this.colGroup[n].key==t?(""==e&&(e="undefined"==typeof this.colGroup[n].sort?"desc":"desc"===this.colGroup[n].sort?"asc":void 0),this.colGroup[n].sort=e):this.config.multiSort||(this.colGroup[n].sort=void 0),"undefined"!=typeof this.colGroup[n].sort&&(i[this.colGroup[n].key]||(i[this.colGroup[n].key]={seq:o++,orderBy:this.colGroup[n].sort}));return this.sortInfo=i,this.setColumnSort(),this},r=function(t){for(var e=0,i=this.colGroup.length;i>e;e++)for(var o in t)this.colGroup[e].key==o&&(this.colGroup[e].sort=t[o].orderBy);return this};t.header={init:o,repaint:n,scrollTo:a,toggleSort:l,applySortStatus:r}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(t){var e=function(t){this.page.currentPage!=t&&(this.page.selectPage=t,this.config.page.onChange&&this.config.page.onChange.call({self:this,page:this.page,data:this.data}))},i={first:function(){e.call(this,0)},prev:function(){var t=this.page.currentPage-1;0>t&&(t=0),e.call(this,t)},next:function(){var t=this.page.currentPage+1;t>this.page.totalPages-1&&(t=this.page.totalPages-1),e.call(this,t)},last:function(){e.call(this,this.page.totalPages-1)}};t in i?i[t].call(this):e.call(this,t-1)},o=function(){var e=this;if(this.page){var o={currentPage:this.page.currentPage,pageSize:this.page.pageSize,totalElements:this.page.totalElements,totalPages:this.page.totalPages,firstIcon:this.config.page.firstIcon,prevIcon:this.config.page.prevIcon||"«",nextIcon:this.config.page.nextIcon||"»",lastIcon:this.config.page.lastIcon},n=this.config.page.navigationItemCount;o["@paging"]=function(){var t=[],e=o.currentPage-Math.floor(n/2);0>e&&(e=0);var i=o.currentPage+n;i>o.totalPages&&(i=o.totalPages),i-e>n&&(i=e+n),n>i-e&&(e=i-n),0>e&&(e=0);for(var a=e,l=i;l>a;a++)t.push({pageNo:a+1,selected:o.currentPage==a});return t}(),this.$.page.navigation.html(t.tmpl.get("page_navigation",o)),this.$.page.navigation.find("[data-ax5grid-page-move]").on("click",function(){var t=this.getAttribute("data-ax5grid-page-move");i.call(e,t)})}else this.$.page.navigation.empty()},n=function(){var i=this.xvar.paintStartRowIndex,o=this.xvar.paintStartRowIndex+this.xvar.paintRowCount-1,n=this.xvar.dataRowCount;o>n&&(o=n),this.$.page.status.html(t.tmpl.get("page_status",{fromRowIndex:e.number(i+1,{money:!0}),toRowIndex:e.number(o,{money:!0}),totalElements:e.number(n,{money:!0})}))};t.page={navigationUpdate:o,statusUpdate:n}}(),function(){var t=ax5.ui.grid,e=ax5.util,i={vertical:function(t,e){var i=e._content_height-e._panel_height,o=e._vertical_scroller_height-e.verticalScrollBarHeight,n=i*t.top/o;return 0>n?n=0:n>i&&(n=i),{top:-n}},horizontal:function(t,e){var i=e._content_width-e._panel_width,o=e._horizontal_scroller_width-e.horizontalScrollBarWidth,n=i*t.left/o;return 0>n?n=0:n>i&&(n=i),{left:-n}}},o={vertical:function(e,o){var n="vertical",a=o._content_height-o._panel_height,l=o._vertical_scroller_height-o.verticalScrollBarHeight,r=l*e/a;if(-r>l){r=-l;var s=i[n].call(this,{top:-r},{_content_width:o._content_width,_content_height:o._content_height,_panel_width:o._panel_width,_panel_height:o._panel_height,_horizontal_scroller_width:o._horizontal_scroller_width,_vertical_scroller_height:o._vertical_scroller_height,verticalScrollBarHeight:o.verticalScrollBarHeight,horizontalScrollBarWidth:o.horizontalScrollBarWidth});t.body.scrollTo.call(this,s)}return-r},horizontal:function(e,o){var n="horizontal",a=o._content_width-o._panel_width,l=o._horizontal_scroller_width-o.horizontalScrollBarWidth,r=l*e/a;if(-r>l){r=-l;var s=i[n].call(this,{left:-r},{_content_width:o._content_width,_content_height:o._content_height,_panel_width:o._panel_width,_panel_height:o._panel_height,_horizontal_scroller_width:o._horizontal_scroller_width,_vertical_scroller_height:o._vertical_scroller_height,verticalScrollBarHeight:o.verticalScrollBarHeight,horizontalScrollBarWidth:o.horizontalScrollBarWidth});t.header.scrollTo.call(this,s),t.body.scrollTo.call(this,s)}return-r}},n={click:function(e,o,n,a){var l=this,r=e.offset(),s={width:o.width(),height:o.height()},d={width:e.innerWidth(),height:e.innerHeight()},c=l.$.scroller.vertical.innerHeight(),h=l.$.panel.body.height(),u=l.$.scroller.horizontal.innerWidth(),g=l.$.panel.body.width(),x=l.xvar.scrollContentHeight,f=l.xvar.scrollContentWidth,p=l.$.scroller["vertical-bar"].height(),v=l.$.scroller["horizontal-bar"].width(),m={vertical:function(e){var i=t.util.getMousePosition(e),o=i.clientY-r.top;return 0>o?o=0:o+s.height>d.height&&(o=d.height-s.height),{top:o}},horizontal:function(e){var i=t.util.getMousePosition(e),o=i.clientX-r.left;return 0>o?o=0:o+s.width>d.width&&(o=d.width-s.width),{left:o}}},b=m[n](a);o.css(b);var y=i[n].call(l,b,{_content_width:f,_content_height:x,_panel_width:g,_panel_height:h,_horizontal_scroller_width:u,_vertical_scroller_height:c,verticalScrollBarHeight:p,horizontalScrollBarWidth:v});"horizontal"===n&&t.header.scrollTo.call(l,y),t.body.scrollTo.call(l,y)},on:function(e,o,a){var l=this,r=o.position(),s={width:o.width(),height:o.height()},d={width:e.innerWidth(),height:e.innerHeight()},c=l.$.scroller.vertical.innerHeight(),h=l.$.panel.body.height(),u=l.$.scroller.horizontal.innerWidth(),g=l.$.panel.body.width(),x=l.xvar.scrollContentHeight,f=l.xvar.scrollContentWidth,p=l.$.scroller["vertical-bar"].height(),v=l.$.scroller["horizontal-bar"].width(),m={vertical:function(e){var i=t.util.getMousePosition(e);l.xvar.__da=i.clientY-l.xvar.mousePosition.clientY;var o=r.top+l.xvar.__da;return 0>o?o=0:o+s.height>d.height&&(o=d.height-s.height),{top:o}},horizontal:function(e){var i=t.util.getMousePosition(e);l.xvar.__da=i.clientX-l.xvar.mousePosition.clientX;var o=r.left+l.xvar.__da;return 0>o?o=0:o+s.width>d.width&&(o=d.width-s.width),{left:o}}};l.xvar.__da=0,jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(e){var n=m[a](e);o.css(n);var r=i[a].call(l,n,{_content_width:f,_content_height:x,_panel_width:g,_panel_height:h,_horizontal_scroller_width:u,_vertical_scroller_height:c,verticalScrollBarHeight:p,horizontalScrollBarWidth:v});"horizontal"===a&&t.header.scrollTo.call(l,r),t.body.scrollTo.call(l,r)}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){n.off.call(l)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){n.off.call(l)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},a={wheel:function(e){var i,o,n=this,a=n.$.panel["body-scroll"].position(),l=n.$.panel.body.height(),s=n.$.panel.body.width(),d=n.xvar.scrollContentHeight,c=n.xvar.scrollContentWidth,h=!1,u=!1;return i=a.left-e.x,o=a.top-e.y,o>=0?(o=0,h=!0):l-d>=o?(o=l-d,o>=0&&(o=0),h=!0):0==e.y&&(h=!0),i>=0?(i=0,u=!0):s-c>=i?(i=s-c,i>=0&&(i=0),u=!0):0==e.x&&(u=!0),t.header.scrollTo.call(this,{left:i}),t.body.scrollTo.call(this,{left:i,top:o}),r.call(this),!h||!u},on:function(){var i=this,o=i.$.panel["body-scroll"].position(),n=i.$.panel.body.height(),l=i.$.panel.body.width(),s=i.xvar.scrollContentHeight,d=i.xvar.scrollContentWidth,c=function(e){var a,r,c=t.util.getMousePosition(e);return i.xvar.__x_da=c.clientX-i.xvar.mousePosition.clientX,i.xvar.__y_da=c.clientY-i.xvar.mousePosition.clientY,a=o.left+i.xvar.__x_da,r=o.top+i.xvar.__y_da,r>=0?r=0:n-s>=r&&(r=n-s,r>=0&&(r=0)),a>=0?a=0:l-d>=a&&(a=l-d,a>=0&&(a=0)),{left:a,top:r}};this.xvar.__x_da=0,this.xvar.__y_da=0,jQuery(document.body).bind("touchmove.ax5grid-"+this.instanceId,function(o){var n=c(o);t.header.scrollTo.call(i,{left:n.left}),t.body.scrollTo.call(i,n,"noRepaint"),r.call(i),e.stopEvent(o)}).bind("touchend.ax5grid-"+this.instanceId,function(o){var n=c(o);t.header.scrollTo.call(i,{left:n.left}),t.body.scrollTo.call(i,n),r.call(i),e.stopEvent(o),a.off.call(i)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind("touchmove.ax5grid-"+this.instanceId).unbind("touchend.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},l=function(){var i=this,o=4;this.$.scroller["vertical-bar"].css({width:this.config.scroller.size-(o+1),left:o/2}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size-(o+1),top:o/2}),this.$.scroller["vertical-bar"].bind(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),n.on.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical")}.bind(this)).bind("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.vertical.bind("click",function(t){t.target&&"vertical"==t.target.getAttribute("data-ax5grid-scroller")&&n.click.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",t)}.bind(this)),this.$.scroller["horizontal-bar"].bind(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),n.on.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal")}.bind(this)).bind("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.horizontal.bind("click",function(t){t.target&&"horizontal"==t.target.getAttribute("data-ax5grid-scroller")&&n.click.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",t)}.bind(this)),this.$.container.body.bind("mousewheel DOMMouseScroll",function(t){var i=t.originalEvent,o={x:0,y:0};i.detail?o.y=10*i.detail:"undefined"==typeof i.deltaY?(o.y=-i.wheelDelta,o.x=0):(o.y=i.deltaY,o.x=i.deltaX),a.wheel.call(this,o)&&e.stopEvent(t)}.bind(this)),document.addEventListener&&ax5.info.supportTouch&&this.$.container.body.on("touchstart","[data-ax5grid-panel]",function(e){i.xvar.mousePosition=t.util.getMousePosition(e),a.on.call(i)})},r=function(){var t=this.$.scroller.vertical.height(),e=this.$.scroller.horizontal.width(),i=this.$.panel.body.height(),n=this.$.panel.body.width(),a=this.xvar.scrollContentHeight,l=this.xvar.scrollContentWidth,r=i*t/a,s=n*e/l;r<this.config.scroller.barMinSize&&(r=this.config.scroller.barMinSize),s<this.config.scroller.barMinSize&&(s=this.config.scroller.barMinSize),this.$.scroller["vertical-bar"].css({top:o.vertical.call(this,this.$.panel["body-scroll"].position().top,{_content_width:l,_content_height:a,_panel_width:n,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:r,horizontalScrollBarWidth:s}),height:r}),this.$.scroller["horizontal-bar"].css({left:o.horizontal.call(this,this.$.panel["body-scroll"].position().left,{_content_width:l,_content_height:a,_panel_width:n,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:r,horizontalScrollBarWidth:s}),width:s}),t=null,e=null,i=null,n=null,a=null,l=null,r=null,s=null};t.scroller={init:l,resize:r}}(),function(){var t=ax5.ui.grid,e='<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="hidden">\n                <textarea data-ax5grid-form="clipboard"></textarea>\n            </div>\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header">\n                    <div data-ax5grid-panel-scroll="header"></div>\n                </div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body">\n                    <div data-ax5grid-panel-scroll="top-body"></div>\n                </div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body">\n                    <div data-ax5grid-panel-scroll="aside-body"></div>\n                </div>\n                <div data-ax5grid-panel="left-body">\n                    <div data-ax5grid-panel-scroll="left-body"></div>\n                </div>\n                <div data-ax5grid-panel="body">\n                    <div data-ax5grid-panel-scroll="body"></div>\n                </div>\n                <div data-ax5grid-panel="right-body">\n                  <div data-ax5grid-panel-scroll="right-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body">\n                    <div data-ax5grid-panel-scroll="bottom-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n            <div data-ax5grid-container="page">\n                <div data-ax5grid-page="holder">\n                    <div data-ax5grid-page="navigation"></div>\n                    <div data-ax5grid-page="status"></div>\n                </div>\n            </div>\n            <div data-ax5grid-container="scroller">\n                <div data-ax5grid-scroller="vertical">\n                    <div data-ax5grid-scroller="vertical-bar"></div>    \n                </div>\n                <div data-ax5grid-scroller="horizontal">\n                    <div data-ax5grid-scroller="horizontal-bar"></div>\n                </div>\n                <div data-ax5grid-scroller="corner"></div>\n            </div>\n            <div data-ax5grid-resizer="vertical"></div>\n            <div data-ax5grid-resizer="horizontal"></div>\n        </div>',i='<div data-ax5grid-page-navigation="holder">\n            <div data-ax5grid-page-navigation="cell">    \n                {{#firstIcon}}<button data-ax5grid-page-move="first">{{{firstIcon}}}</button>{{/firstIcon}}\n                <button data-ax5grid-page-move="prev">{{{prevIcon}}}</button>\n            </div>\n            <div data-ax5grid-page-navigation="cell-paging">\n                {{#@paging}}\n                <button data-ax5grid-page-move="{{pageNo}}" data-ax5grid-page-selected="{{selected}}">{{pageNo}}</button>\n                {{/@paging}}\n            </div>\n            <div data-ax5grid-page-navigation="cell">\n                <button data-ax5grid-page-move="next">{{{nextIcon}}}</button>\n                {{#lastIcon}}<button data-ax5grid-page-move="last">{{{lastIcon}}}</button>{{/lastIcon}}\n            </div>\n        </div>',o="<span>{{fromRowIndex}} - {{toRowIndex}} of {{totalElements}}</span>";t.tmpl={main:e,page_navigation:i,page_status:o,get:function(e,i){return ax5.mustache.render(t.tmpl[e],i)}}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(t,e){for(var i={rows:[]},o={rows:[]},n=0,a=t.rows.length;a>n;n++){var l=t.rows[n];i.rows[n]={cols:[]},o.rows[n]={cols:[]};for(var r=0,s=l.cols.length;s>r;r++){var d=jQuery.extend({},l.cols[r]),c=d.colIndex,h=d.colIndex+d.colspan;if(e>c)if(e>=h)i.rows[n].cols.push(d);else{var u=jQuery.extend({},d),g=jQuery.extend({},u);u.colspan=e-u.colIndex,g.colIndex=e,g.colspan=d.colspan-u.colspan,i.rows[n].cols.push(u),o.rows[n].cols.push(g)}else o.rows[n].cols.push(d)}}return{leftData:i,rightData:o}},o=function(t){var e,i=t.originalEvent?t.originalEvent:t;return e="changedTouches"in i?i.changedTouches[0]:i,{clientX:e.pageX,clientY:e.pageY}},n={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},a=function(t){var t=e.deepCopy(t),i=this.config,o={rows:[]},n=0,a=function c(t,e,a){for(var l={cols:[]},r=0,s=t.length;s>r;r++){var d=t[r],h=1;d.hidden||(d.colspan=1,d.rowspan=1,d.rowIndex=e,d.colIndex=function(){return a?(n=a.colIndex+r+1,a.colIndex+r):n++}(),l.cols.push(d),"columns"in d?h=c(d.columns,e+1,d):d.width="width"in d?d.width:i.columnMinWidth,d.colspan=h)}return l.cols.length>0?(o.rows[e]||(o.rows[e]={cols:[]}),o.rows[e].cols=o.rows[e].cols.concat(l.cols),l.cols.length-1+h):h};a(t,0);for(var l=0,r=o.rows.length;r>l;l++)for(var s=0,d=o.rows[l].cols.length;d>s;s++)"columns"in o.rows[l].cols[s]||(o.rows[l].cols[s].rowspan=r-l);return o},l=function(t){var t=e.deepCopy(t),i={rows:[]},o=0,n=function a(t,e,n){for(var l={cols:[]},r=0,s=t.length,d=(function u(t){for(var i=0,r=t.length;r>i;i++){var s=t[i],d=1;s.hidden||("key"in s?(s.colspan=1,s.rowspan=1,s.rowIndex=e,s.colIndex=function(){return n?(o=n.colIndex+i+1,n.colIndex+i):o++}(),l.cols.push(s),"columns"in s&&(d=a(s.columns,e+1,s)),s.colspan=d):"columns"in s&&u(s.columns,e))}});s>r;r++){var c=t[r],h=1;c.hidden||("key"in c?(c.colspan=1,c.rowspan=1,c.rowIndex=e,c.colIndex=function(){return n?(o=n.colIndex+r+1,n.colIndex+r):o++}(),l.cols.push(c),"columns"in c&&(h=a(c.columns,e+1,c)),c.colspan=h):"columns"in c&&d(c.columns,e))}return l.cols.length>0?(i.rows[e]||(i.rows[e]={cols:[]}),i.rows[e].cols=i.rows[e].cols.concat(l.cols),l.cols.length-1+h):h};return n(t,0),function(t){for(var e=0,i=t.rows.length;i>e;e++)for(var o=t.rows[e],n=0,a=o.cols.length;a>n;n++){var l=o.cols[n];"columns"in l||(l.rowspan=i-e)}}(i),i},r=function(t){var e={};return t.rows.forEach(function(t){t.cols.forEach(function(t){e[t.rowIndex+"_"+t.colIndex]=jQuery.extend({},t)})}),e},s=function(t){for(var e={rows:[]},i=0,o=t.length;o>i;i++){var n=t[i];e.rows[i]={cols:[]};for(var a=0,l=0,r=n.length;r>l;l++){var s=n[l].colspan||1;n[l].label||n[l].key?e.rows[i].cols.push({colspan:s,rowspan:1,colIndex:a,label:n[l].label,key:n[l].key,collector:n[l].collector}):e.rows[i].cols.push({colIndex:a,colspan:s,rowspan:1,label:"&nbsp;"}),a+=s}if(a<this.columns.length)for(var l=a-1;l<this.columns.length;l++)e.rows[i].cols.push({colIndex:l+1,colspan:1,rowspan:1,label:"&nbsp;"})}return e};t.util={divideTableByFrozenColumnIndex:i,getMousePosition:o,ENM:n,makeHeaderTable:a,makeBodyRowTable:l,makeBodyRowMap:r,makeFootSumTable:s}}();