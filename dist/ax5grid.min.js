"use strict";!function(){var t,e=ax5.ui,i=ax5.util;e.addClass({className:"grid",version:"0.0.6"},function(){var o=function(){var o,a=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,frozenColumnIndex:0,frozenRowIndex:0,rightSum:!1,footSum:!1,showLineNumber:!1,showRowSelector:!1,height:400,columnMinWidth:100,lineNumberColumnWidth:30,rowSelectorColumnWidth:25,header:{columnHeight:25,columnPadding:3,columnBorderWidth:1},body:{columnHeight:25,columnPadding:3,columnBorderWidth:1},page:{height:25,display:!1},scroller:{size:15,barMinSize:15},columnKeys:{selected:"_SELECTED"}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0},this.columns=[],this.colGroup=[],this.data=[],this.focusedColumn={},this.selectedColumn={},this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowTable={},this.bodyRowMap={},o=this.config;var n=function(t){var e={rows:[]},i=0,a=function n(t,a,r){for(var l={cols:[]},d=0,s=t.length;s>d;d++){var h=t[d],c=1;h.hidden||(h.colspan=1,h.rowspan=1,h.rowIndex=a,h.colIndex=function(){return r?(i=r.colIndex+d+1,r.colIndex+d):i++}(),l.cols.push(h),"columns"in h?c=n(h.columns,a+1,h):h.width="width"in h?h.width:o.columnMinWidth,h.colspan=c)}return l.cols.length>0?(e.rows[a]||(e.rows[a]={cols:[]}),e.rows[a].cols=e.rows[a].cols.concat(l.cols),l.cols.length-1+c):c};return a(t,0),function(){for(var t=0,i=e.rows.length;i>t;t++)for(var o=e.rows[t],a=0,n=o.cols.length;n>a;a++){var r=o.cols[a];"columns"in r||(r.rowspan=i-t)}}(),e},r=function(){var e={instanceId:this.id};return this.$target.html(t.tmpl.get("main",e)),this.$={container:{hidden:this.$target.find('[data-ax5grid-container="hidden"]'),root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),page:this.$target.find('[data-ax5grid-container="page"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},livePanelKeys:[],scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')},page:{navigation:"",status:""},form:{clipboard:this.$target.find('[data-ax5grid-form="clipboard"]')}},this.$.container.root.css({height:o.height}),this},l=function(t){this.columns=i.deepCopy(t),this.headerTable=n.call(this,this.columns),this.xvar.frozenColumnIndex=o.frozenColumnIndex>this.columns.length?this.columns.length:o.frozenColumnIndex;for(var e={},a=0,r=this.headerTable.rows.length;r>a;a++)for(var l=this.headerTable.rows[a],d=0,s=l.cols.length;s>d;d++)e[l.cols[d].colIndex]=jQuery.extend({},l.cols[d]);this.colGroup=[];for(var h in e)this.colGroup.push(e[h]);return this},d=function(){var t,e,o,a=this.$.container.root.width(),n=0,r=[],l=this.colGroup;for(e=0,o=l.length;o>e;e++)i.isNumber(l[e].width)?n+=l[e]._width=l[e].width:"*"===l[e].width?r.push(e):"%"===i.right(l[e].width,1)&&(n+=l[e]._width=a*i.left(l[e].width,"%")/100);if(r.length>0)for(t=(a-n)/r.length,e=0,o=r.length;o>e;e++)l[r[e]]._width=t},s=function(t){var e=this.$.container.root.width(),i=this.$.container.root.height(),a=e,n=i,r=o.asidePanelWidth=function(){var t=0;return o.showLineNumber&&(t+=o.lineNumberColumnWidth),o.showRowSelector&&(t+=o.rowSelectorColumnWidth),t}(),l=o.frozenPanelWidth=function(t,e){for(var i=0,o=0,a=e;a>o;o++)i+=t[o]._width;return i}(this.colGroup,o.frozenColumnIndex),d=0,s=function(t){return o.frozenRowIndex*t}(this.xvar.bodyTrHeight),h=0,c=this.headerTable.rows.length*o.header.columnHeight,u=function(){return i-c<this.data.length*this.xvar.bodyTrHeight?this.config.scroller.size:0}.call(this),x=function(){for(var t=0,i=e-r-u,o=0,a=this.colGroup.length;a>o;o++)t+=this.colGroup[o]._width;return t>i?this.config.scroller.size:0}.call(this);a=e-u,n=i-x;var g=n-c,f=function(t,e,i,n){var u={},x=!1;switch(i){case"aside":0===r?x=!0:(u.left=0,u.width=r);break;case"left":0===o.frozenColumnIndex?x=!0:(u.left=r,u.width=l);break;case"right":o.rightSum||(x=!0);break;default:0===o.frozenColumnIndex?u.left=r:u.left=l+r,u.width=a-r-l-d}if(x)return this;if("body"===n)switch(e){case"top":0==o.frozenRowIndex?x=!0:(u.top=0,u.height=s);break;case"bottom":o.footSum?(u.top=g-h,u.height=h):x=!0;break;default:u.top=s,u.height=g-s-h}else"header"===n&&(u.height=c);return x?(t.hide(),this):(t.css(u),this)},p=function(t,e,i,o){var r={},l=!1;switch(o){case"vertical":e>0?(r.width=e,r.height=n,r.bottom=i):l=!0;break;case"horizontal":i>0?(r.width=a,r.height=i,r.right=e):l=!0;break;case"corner":e>0&&i>0?(r.width=e,r.height=i):l=!0}return l?(t.hide(),this):void t.show().css(r)};this.$.container.header.css({height:c}),this.$.container.body.css({height:g}),f.call(this,this.$.panel["aside-header"],"","aside","header"),f.call(this,this.$.panel["left-header"],"","left","header"),f.call(this,this.$.panel.header,"","","header"),f.call(this,this.$.panel["right-header"],"","right","header"),f.call(this,this.$.panel["top-aside-body"],"top","aside","body"),f.call(this,this.$.panel["top-left-body"],"top","left","body"),f.call(this,this.$.panel["top-body"],"top","","body"),f.call(this,this.$.panel["top-right-body"],"top","right","body"),f.call(this,this.$.panel["aside-body"],"","aside","body"),f.call(this,this.$.panel["left-body"],"","left","body"),f.call(this,this.$.panel.body,"","","body"),f.call(this,this.$.panel["right-body"],"","right","body"),f.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),f.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),f.call(this,this.$.panel["bottom-body"],"bottom","","body"),f.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),p.call(this,this.$.scroller.vertical,u,x,"vertical"),p.call(this,this.$.scroller.horizontal,u,x,"horizontal"),p.call(this,this.$.scroller.corner,u,x,"corner")};this.init=function(e){this.onStateChanged=o.onStateChanged,this.onClick=o.onClick;var n=this.gridConfig=jQuery.extend(!0,{},o,e);if(!n.target)return console.log(ax5.info.getError("ax5grid","401","init")),this;this.$target=jQuery(n.target),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+ax5.getGuid(),this.$target.data("data-ax5grid-id",n.id)),function(t){i.isObject(t)&&!t.error&&(n=jQuery.extend(!0,n,t))}(i.parseJson(this.$target.attr("data-ax5grid-config"),!0)),r.call(this),l.call(this,n.columns),d.call(this),s.call(this,!0),t.header.init.call(this),t.header.repaint.call(this),t.body.init.call(this),t.body.repaint.call(this),t.scroller.init.call(this),t.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.instanceId,function(){s.call(this),t.scroller.resize.call(this)}.bind(this)),jQuery(document.body).on("click.ax5grid-"+this.instanceId,function(e){var o=i.findParentNode(e.target,{"data-ax5grid-container":"root"});o?a.focused=!0:(a.focused=!1,t.body.blur.call(a))});var h={33:"KEY_PAGEUP",34:"KEY_PAGEDOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_LEFT",38:"KEY_UP",39:"KEY_RIGHT",40:"KEY_DOWN"};return jQuery(window).on("keydown.ax5grid-"+this.instanceId,function(t){a.focused&&(t.metaKey||t.ctrlKey?67==t.which&&a.copySelect():h[t.which]&&a.keyDown(h[t.which],t))}),this},this.align=function(){return s.call(this),t.scroller.resize.call(this),this},this.keyDown=function(){var e={KEY_UP:function(){t.body.moveFocus.call(this,"UP")},KEY_DOWN:function(){t.body.moveFocus.call(this,"DOWN")},KEY_LEFT:function(){t.body.moveFocus.call(this,"LEFT")},KEY_RIGHT:function(){t.body.moveFocus.call(this,"RIGHT")}};return function(t,i){return t in e&&e[t].call(this,i),this}}(),this.copySelect=function(){var t,e,o,a,n=this.$.form.clipboard,r=[],l="",d=0;for(var s in this.selectedColumn){var h=this.selectedColumn[s];if(h){"undefined"==typeof a&&(a=h.dindex,e=h.rowIndex,o=h.rowIndex),(a!=h.dindex||e!=h.rowIndex)&&d++,r[d]||(r[d]=[]);var c=this.bodyRowMap[h.rowIndex+"_"+h.colIndex];c?r[d].push(this.data[h.dindex][c.key]):r[d].push(""),a=h.dindex,e=h.rowIndex}}r.forEach(function(t){l+=t.join("	")+"\n"}),n.get(0).innerText=l,i.selectRange(n);try{t=document.execCommand("copy")}catch(u){t=!1}return t},this.setData=function(e){return this.xvar.frozenRowIndex=o.frozenRowIndex>e.length?e.length:o.frozenRowIndex,t.data.set.call(this,e),s.call(this),t.body.repaint.call(this),t.scroller.resize.call(this),this},this.main=function(){e.grid_instance=e.grid_instance||[],e.grid_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return o}()),t=ax5.ui.grid}(),function(){var t=ax5.ui.grid,e=ax5.util,i={focusClear:function(){var t=this;for(var e in t.focusedColumn){var i=t.focusedColumn[e];i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-focused")}t.focusedColumn={}},clear:function(){var t=this;for(var e in t.selectedColumn){var i=t.selectedColumn[e];i&&t.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').removeAttr("data-ax5grid-column-selected")}t.selectedColumn={}},init:function(t){var e=this;i.focusClear.call(e),e.focusedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]={panelName:t.panelName,dindex:t.dindex,rowIndex:t.rowIndex,colIndex:t.colIndex,colspan:t.colspan},i.clear.call(e),e.xvar.selectedRange={start:[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],end:null},e.selectedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]=function(e){return e?!1:{panelName:t.panelName,dindex:t.dindex,rowIndex:t.rowIndex,colIndex:t.colIndex,colspan:t.colspan}}(e.selectedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]),this.$.panel[t.panelName].find('[data-ax5grid-tr-data-index="'+t.dindex+'"]').find('[data-ax5grid-column-rowindex="'+t.rowIndex+'"][data-ax5grid-column-colindex="'+t.colIndex+'"]').attr("data-ax5grid-column-focused","true").attr("data-ax5grid-column-selected","true")},update:function(t){var e,o,a,n,r=this;r.xvar.selectedRange.end=[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],i.clear.call(r);var l={r:{s:Math.min(r.xvar.selectedRange.start[0],r.xvar.selectedRange.end[0]),e:Math.max(r.xvar.selectedRange.start[0],r.xvar.selectedRange.end[0])},c:{s:Math.min(r.xvar.selectedRange.start[2],r.xvar.selectedRange.end[2]),e:Math.max(r.xvar.selectedRange.start[2]+r.xvar.selectedRange.start[3],r.xvar.selectedRange.end[2]+r.xvar.selectedRange.end[3])}};for(e=l.r.s;e<=l.r.e;e++)for(n=this.bodyRowTable.rows.length,a=0;n>a;a++)for(o=l.c.s;o<=l.c.e;o++){var d=[],s="";r.xvar.frozenRowIndex>e&&d.push("top"),r.xvar.frozenColumnIndex>o&&d.push("left"),d.push("body"),"top"!==d[0]&&d.push("scroll"),s=d.join("-"),r.selectedColumn[e+"_"+o+"_"+a]={panelName:s,dindex:e,rowIndex:a,colIndex:o,colspan:t.colspan},d=null,s=null}e=null,o=null,a=null;for(var h in r.selectedColumn){var c=r.selectedColumn[h];c&&r.$.panel[c.panelName].find('[data-ax5grid-tr-data-index="'+c.dindex+'"]').find('[data-ax5grid-column-rowindex="'+c.rowIndex+'"][data-ax5grid-column-colindex="'+c.colIndex+'"]').attr("data-ax5grid-column-selected","true")}}},o={on:function(t){var e=this;i.init.call(e,t),this.$.container.body.on("mousemove.ax5grid-"+this.instanceId,'[data-ax5grid-column-attr="default"]',function(){this.getAttribute("data-ax5grid-column-rowIndex")&&i.update.call(e,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))})}).on("mouseup.ax5grid-"+this.instanceId,function(){o.off.call(e)}).on("mouseleave.ax5grid-"+this.instanceId,function(){o.off.call(e)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){this.$.container.body.off("mousemove.ax5grid-"+this.instanceId).off("mouseup.ax5grid-"+this.instanceId).off("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},a=function(t,e,i){var o=this,a=this.config,n={selected:function(t){for(var e=this.$.livePanelKeys.length;e--;)this.$.panel[this.$.livePanelKeys[e]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",this.data[t][a.columnKeys.selected])}};t.forEach(function(t){n[t].call(o,e,i)})},n=function(){var i=this;this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowTable=r.call(this,this.columns),this.bodyRowMap=l.call(this,this.bodyRowTable),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight,this.$.container.body.on("click","[data-ax5grid-column-attr]",function(){var e,o,n,r,l,d,s,h={"default":function(t){},rowSelector:function(e){t.data.select.call(i,e.dindex),a.call(i,["selected"],e.dindex)},lineNumber:function(t){}};e=this.getAttribute("data-ax5grid-panel-name"),o=this.getAttribute("data-ax5grid-column-attr"),n=Number(this.getAttribute("data-ax5grid-column-row")),r=Number(this.getAttribute("data-ax5grid-column-col")),d=Number(this.getAttribute("data-ax5grid-column-rowIndex")),s=Number(this.getAttribute("data-ax5grid-column-colIndex")),l=Number(this.getAttribute("data-ax5grid-data-index")),o in h&&h[o]({panelName:e,attr:o,row:n,col:r,dindex:l,rowIndex:d,colIndex:s})}),this.$.container.body.on("mouseover","tr",function(){return}),this.$.container.body.on("mousedown",'[data-ax5grid-column-attr="default"]',function(t){this.getAttribute("data-ax5grid-column-rowIndex")&&o.on.call(i,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))})}).on("dragstart",function(t){return e.stopEvent(t),!1})},r=function(t){var e={rows:[]},i=0,o=function a(t,o,n){for(var r={cols:[]},l=0,d=t.length,s=(function u(t){for(var e=0,l=t.length;l>e;e++){var d=t[e],s=1;d.hidden||("key"in d?(d.colspan=1,d.rowspan=1,d.rowIndex=o,d.colIndex=function(){return n?(i=n.colIndex+e+1,n.colIndex+e):i++}(),r.cols.push(d),"columns"in d&&(s=a(d.columns,o+1,d)),d.colspan=s):"columns"in d&&u(d.columns,o))}});d>l;l++){var h=t[l],c=1;h.hidden||("key"in h?(h.colspan=1,h.rowspan=1,h.rowIndex=o,h.colIndex=function(){return n?(i=n.colIndex+l+1,n.colIndex+l):i++}(),r.cols.push(h),"columns"in h&&(c=a(h.columns,o+1,h)),h.colspan=c):"columns"in h&&s(h.columns,o))}return r.cols.length>0?(e.rows[o]||(e.rows[o]={cols:[]}),e.rows[o].cols=e.rows[o].cols.concat(r.cols),r.cols.length-1+c):c};return o(t,0),function(){for(var t=0,i=e.rows.length;i>t;t++)for(var o=e.rows[t],a=0,n=o.cols.length;n>a;a++){var r=o.cols[a];"columns"in r||(r.rowspan=i-t)}}(),e},l=function(t){var e={};return t.rows.forEach(function(t){t.cols.forEach(function(t){e[t.rowIndex+"_"+t.colIndex]=jQuery.extend({},t)})}),e},d=function(){var e=this.config,i=this.data,o=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex;if(this.xvar.dataRowCount===i.length&&this.xvar.paintStartRowIndex===o)return this;var a="undefined"==typeof this.xvar.paintStartRowIndex,n=t.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.xvar.frozenColumnIndex),r=this.asideBodyRowData=function(t){for(var i={rows:[]},o=0,a=t.rows.length;a>o;o++)if(i.rows[o]={cols:[]},0===o){var n={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},r={};e.showLineNumber&&(r=jQuery.extend({},n,{width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),i.rows[o].cols.push(r)),e.showRowSelector&&(r=jQuery.extend({},n,{width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),i.rows[o].cols.push(r))}return i}.call(this,this.bodyRowTable),l=this.leftBodyRowData=n.leftData,d=this.bodyRowData=n.rightData,s=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1;this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(this.data.length-this.xvar.frozenRowIndex),this.$.livePanelKeys=[];var h=function(t,i,o,n,r){var l=this.$.panel[t];if(!a&&!r)return this.$.livePanelKeys.push(t),!1;var d,s,h,c,u,x,g,f,p,v,b,m=[],w=function(){return"undefined"==typeof r||"undefined"==typeof r.paintStartRowIndex?(r={paintStartRowIndex:0,paintRowCount:n.length},!1):!0}(),y=function(t,e,i){return"__d-index__"===i?e+1:"__d-checkbox__"===i?'<div class="checkBox"></div>':t[i]||"&nbsp;"};for(m.push('<table border="0" cellpadding="0" cellspacing="0">'),m.push("<colgroup>"),d=0,s=i.length;s>d;d++)m.push('<col style="width:'+i[d]._width+'px;"  />');for(m.push("<col  />"),m.push("</colgroup>"),h=r.paintStartRowIndex,c=function(){var t;return t=n.length,r.paintRowCount+r.paintStartRowIndex<t&&(t=r.paintRowCount+r.paintStartRowIndex),t}();c>h;h++)for(u=0,x=o.rows.length;x>u;u++){for(m.push('<tr class="tr-'+h%4+'" data-ax5grid-tr-data-index="'+h+'" data-ax5grid-selected="'+(n[h][e.columnKeys.selected]||"false")+'">'),g=0,f=o.rows[u].cols.length;f>g;g++)p=o.rows[u].cols[g],v=e.body.columnHeight*p.rowspan-e.body.columnBorderWidth,b="",e.body.columnBorderWidth&&(b+="hasBorder "),g==f-1&&(b+="isLastColumn "),i[p.colIndex]&&i[p.colIndex].CSSClass&&(b+=i[p.colIndex].CSSClass+" "),p.CSSClass&&(b+=p.CSSClass+" "),m.push("<td ",'data-ax5grid-panel-name="'+t+'" ','data-ax5grid-data-index="'+h+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+g+'" ','data-ax5grid-column-rowIndex="'+p.rowIndex+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"default")+'" ',function(t,e){var i="";return t&&(i+='data-ax5grid-column-focused="true" '),e&&(i+='data-ax5grid-column-selected="true" '),i}(this.focusedColumn[h+"_"+p.colIndex+"_"+p.rowIndex],this.selectedColumn[h+"_"+p.colIndex+"_"+p.rowIndex]),'colspan="'+p.colspan+'" rowspan="'+p.rowspan+'" ','class="'+b+'" ','style="height: '+v+'px;min-height: 1px;">'),m.push(function(){var t=e.body.columnHeight-2*e.body.columnPadding-e.body.columnBorderWidth;return p.multiLine?'<span data-ax5grid-cellHolder="multiLine" style="height:'+v+"px;line-height: "+t+'px;">':'<span data-ax5grid-cellHolder="" style="height: '+(e.body.columnHeight-e.body.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),y.call(this,n[h],h,p.key),"</span>"),m.push("</td>");m.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+h+'" ','data-ax5grid-column-attr="default" ','style="height: '+e.body.columnHeight+'px;min-height: 1px;" ',"></td>"),m.push("</tr>")}return m.push("</table>"),w&&l.css({paddingTop:(r.paintStartRowIndex-this.xvar.frozenRowIndex)*r.bodyTrHeight}),l.html(m.join("")),this.$.livePanelKeys.push(t),!0},c={paintStartRowIndex:o,paintRowCount:s,bodyTrHeight:this.xvar.bodyTrHeight};e.asidePanelWidth>0&&(this.xvar.frozenRowIndex>0&&h.call(this,"top-aside-body",this.asideColGroup,r,i.slice(0,this.xvar.frozenRowIndex)),h.call(this,"aside-body-scroll",this.asideColGroup,r,i,c),e.footSum&&h.call(this,"bottom-aside-body",this.asideColGroup,r,i)),this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&h.call(this,"top-left-body",this.leftHeaderColGroup,l,i.slice(0,this.xvar.frozenRowIndex)),h.call(this,"left-body-scroll",this.leftHeaderColGroup,l,i,c),e.footSum),this.xvar.frozenRowIndex>0&&h.call(this,"top-body-scroll",this.headerColGroup,d,i.slice(0,this.xvar.frozenRowIndex)),h.call(this,"body-scroll",this.headerColGroup,d,i,c),e.footSum,e.rightSum,this.xvar.paintStartRowIndex=o,this.xvar.paintRowCount=s,this.xvar.dataRowCount=i.length},s=function(t,e){var i=this.config;i.asidePanelWidth>0&&"top"in t&&this.$.panel["aside-body-scroll"].css({top:t.top}),this.xvar.frozenColumnIndex>0&&"top"in t&&this.$.panel["left-body-scroll"].css({top:t.top}),this.xvar.frozenRowIndex>0&&"left"in t&&this.$.panel["top-body-scroll"].css({left:t.left}),this.$.panel["body-scroll"].css(t),!e&&"top"in t&&d.call(this)},h=function(){i.focusClear.call(this),i.clear.call(this)},c=function(e){var o={UD:function(e){var o,a,n;for(var r in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[r],!0);break}for(a=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],i.focusClear.call(this),i.clear.call(this),e>0?o.rowIndex+(a.rowspan-1)+e>this.bodyRowTable.rows.length-1?(o.dindex=o.dindex+e,o.rowIndex=0,o.dindex>this.data.length-1&&(o.dindex=this.data.length-1)):o.rowIndex=o.rowIndex+e:o.rowIndex+e<0?(o.dindex=o.dindex+e,o.rowIndex=this.bodyRowTable.rows.length-1,o.dindex<0&&(o.dindex=0)):o.rowIndex=o.rowIndex+e,n=0;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(0==o.rowIndex||n%2==(e>0?0:1)?o.colIndex--:o.rowIndex--,!(o.rowIndex<=0&&o.colIndex<=0));)n++;o.panelName=function(){var t=[],e="";return this.xvar.frozenRowIndex>o.dindex&&t.push("top"),this.xvar.frozenColumnIndex>o.colIndex&&t.push("left"),t.push("body"),"top"!==t[0]&&t.push("scroll"),e=t.join("-")}.call(this),function(){o.dindex+1>this.xvar.frozenRowIndex&&(o.dindex<this.xvar.paintStartRowIndex?(s.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)):o.dindex+1>this.xvar.paintStartRowIndex+(this.xvar.paintRowCount-2)&&(s.call(this,{top:-(o.dindex-this.xvar.frozenRowIndex-this.xvar.paintRowCount+3)*this.xvar.bodyTrHeight}),t.scroller.resize.call(this)))}.call(this),this.focusedColumn[o.dindex+"_"+o.rowIndex+"_"+o.colIndex]=o,this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true")},LR:function(e){var o,a,n=0,r=!1,l="";for(var d in this.focusedColumn){o=jQuery.extend({},this.focusedColumn[d],!0);break}for(a=this.bodyRowMap[o.rowIndex+"_"+o.colIndex],i.focusClear.call(this),i.clear.call(this),0>e?(o.colIndex=o.colIndex+e,o.colIndex<0&&(o.colIndex=0)):(o.colIndex=o.colIndex+(a.colspan-1)+e,o.colIndex>this.colGroup.length-1&&(o.colIndex=this.colGroup.length-1)),"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(o.rowIndex=0),n=0;"undefined"==typeof this.bodyRowMap[o.rowIndex+"_"+o.colIndex]&&(o.colIndex--,!(o.rowIndex<=0&&o.colIndex<=0));)n++;o.panelName=function(){var t=[],e="";return this.xvar.frozenRowIndex>o.dindex&&t.push("top"),this.xvar.frozenColumnIndex>o.colIndex&&t.push("left"),t.push("body"),"top"!==t[0]&&(this.xvar.frozenColumnIndex<=o.colIndex&&(l=t.join("-"),r=!0),t.push("scroll")),e=t.join("-")}.call(this),function(){}.call(this),this.focusedColumn[o.dindex+"_"+o.rowIndex+"_"+o.colIndex]=o;var h=this.$.panel[o.panelName].find('[data-ax5grid-tr-data-index="'+o.dindex+'"]').find('[data-ax5grid-column-rowindex="'+o.rowIndex+'"][data-ax5grid-column-colindex="'+o.colIndex+'"]').attr("data-ax5grid-column-focused","true");if(r){var c=function(){return h.position().left+h.outerWidth()>Math.abs(this.$.panel[o.panelName].position().left)+this.$.panel[l].width()?h.position().left+h.outerWidth()-this.$.panel[l].width():Math.abs(this.$.panel[o.panelName].position().left)>h.position().left?h.position().left:void 0}.call(this);"undefined"!=typeof c&&(t.header.scrollTo.call(this,{left:-c}),s.call(this,{left:-c}),t.scroller.resize.call(this))}}},a={UP:function(){o.UD.call(this,-1)},DOWN:function(){o.UD.call(this,1)},LEFT:function(){o.LR.call(this,-1)},RIGHT:function(){o.LR.call(this,1)},position:function(t){console.log("222")}};return e in a?(a[e].call(this),this):void a.position.call(this,e)};t.body={init:n,repaint:d,updateRowState:a,scrollTo:s,blur:h,moveFocus:c}}(),function(){var t=ax5.ui.grid,e=ax5.util,i=function(){},o=function(t){return this.data=e.deepCopy(t),this.xvar.paintStartRowIndex=void 0,this},a=function(){},n=function(){},r=function(t,e){return"undefined"==typeof e?this.data[t][this.config.columnKeys.selected]=!this.data[t][this.config.columnKeys.selected]:this.data[t][this.config.columnKeys.selected]=e,this.data[t][this.config.columnKeys.selected]};t.data={init:i,set:o,get:a,setValue:n,select:r}}(),function(){var t=ax5.ui.grid,e=(ax5.util,function(){this.leftHeaderData={},this.headerData={},this.rightHeaderData={}}),i=function(){var e=this.config,i=t.util.divideTableByFrozenColumnIndex(this.headerTable,this.config.frozenColumnIndex),o=this.asideHeaderData=function(t){for(var i=[],o={rows:[]},a=0,n=t.rows.length;n>a;a++)if(o.rows[a]={cols:[]},0===a){var r={label:"",colspan:1,rowspan:t.rows.length,key:"__dindex__",colIndex:null},l={};e.showLineNumber&&(l=jQuery.extend({},r,{label:"&nbsp;",width:e.lineNumberColumnWidth,_width:e.lineNumberColumnWidth}),i.push(l),o.rows[a].cols.push(l)),e.showRowSelector&&(l=jQuery.extend({},r,{label:"",width:e.rowSelectorColumnWidth,_width:e.rowSelectorColumnWidth}),i.push(l),o.rows[a].cols.push(l))}return this.asideColGroup=i,o}.call(this,this.headerTable),a=this.leftHeaderData=i.leftData,n=this.headerData=i.rightData;this.leftHeaderColGroup=this.colGroup.slice(0,this.config.frozenColumnIndex),this.headerColGroup=this.colGroup.slice(this.config.frozenColumnIndex);var r=function(t,i,o){var a=0,n=[];n.push('<table border="0" cellpadding="0" cellspacing="0">'),n.push("<colgroup>");for(var r=0,l=i.length;l>r;r++)n.push('<col style="width:'+i[r]._width+'px;"  />'),a+=i[r]._width;n.push("<col  />"),n.push("</colgroup>");for(var d=0,s=o.rows.length;s>d;d++){var h="";n.push('<tr class="'+h+'">');for(var c=0,u=o.rows[d].cols.length;u>c;c++){var x=o.rows[d].cols[c],g=e.header.columnHeight*x.rowspan-e.header.columnBorderWidth,f="";e.header.columnBorderWidth&&(f+="hasBorder "),c==u-1&&(f+="isLastColumn "),n.push("<td ",'data-ax5grid-column-row="'+d+'" ','data-ax5grid-column-col="'+c+'" ','colspan="'+x.colspan+'" rowspan="'+x.rowspan+'" ','class="'+f+'" ','style="height: '+g+'px;min-height: 1px;">'),n.push(function(){var t=e.header.columnHeight-2*e.header.columnPadding-e.header.columnBorderWidth;return x.multiLine?'<span data-ax5grid-cellHolder="multiLine" style="height:'+g+"px;line-height: "+t+'px;">':'<span data-ax5grid-cellHolder="" style="height: '+(e.header.columnHeight-e.header.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),x.label||"&nbsp;","</span>"),n.push("</td>")}n.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','style="height: '+e.header.columnHeight+'px;min-height: 1px;" ',"></td>"),n.push("</tr>")}return n.push("</table>"),t.html(n.join("")),a};e.asidePanelWidth>0&&r(this.$.panel["aside-header"],this.asideColGroup,o),e.frozenColumnIndex>0&&r(this.$.panel["left-header"],this.leftHeaderColGroup,a),this.xvar.scrollContentWidth=r(this.$.panel["header-scroll"],this.headerColGroup,n),e.rightSum},o=function(t){this.$.panel["header-scroll"].css(t)};t.header={init:e,repaint:i,scrollTo:o}}(),function(){var t=ax5.ui.grid,e=ax5.util,i={vertical:function(t,e){var i=e._content_height-e._panel_height,o=e._vertical_scroller_height-e.verticalScrollBarHeight,a=i*t.top/o;return 0>a?a=0:a>i&&(a=i),{top:-a}},horizontal:function(t,e){var i=e._content_width-e._panel_width,o=e._horizontal_scroller_width-e.horizontalScrollBarWidth,a=i*t.left/o;return 0>a?a=0:a>i&&(a=i),{left:-a}}},o={vertical:function(e,o){var a="vertical",n=o._content_height-o._panel_height,r=o._vertical_scroller_height-o.verticalScrollBarHeight,l=r*e/n;if(-l>r){l=-r;var d=i[a].call(this,{top:-l},{_content_width:o._content_width,_content_height:o._content_height,_panel_width:o._panel_width,_panel_height:o._panel_height,_horizontal_scroller_width:o._horizontal_scroller_width,_vertical_scroller_height:o._vertical_scroller_height,verticalScrollBarHeight:o.verticalScrollBarHeight,horizontalScrollBarWidth:o.horizontalScrollBarWidth});t.body.scrollTo.call(this,d)}return-l},horizontal:function(e,o){var a="horizontal",n=o._content_width-o._panel_width,r=o._horizontal_scroller_width-o.horizontalScrollBarWidth,l=r*e/n;if(-l>r){l=-r;var d=i[a].call(this,{left:-l},{_content_width:o._content_width,_content_height:o._content_height,_panel_width:o._panel_width,_panel_height:o._panel_height,_horizontal_scroller_width:o._horizontal_scroller_width,_vertical_scroller_height:o._vertical_scroller_height,verticalScrollBarHeight:o.verticalScrollBarHeight,horizontalScrollBarWidth:o.horizontalScrollBarWidth});t.header.scrollTo.call(this,d),t.body.scrollTo.call(this,d)}return-l}},a={click:function(e,o,a,n){var r=this,l=e.offset(),d={width:o.width(),height:o.height()},s={width:e.innerWidth(),height:e.innerHeight()},h=r.$.scroller.vertical.innerHeight(),c=r.$.panel.body.height(),u=r.$.scroller.horizontal.innerWidth(),x=r.$.panel.body.width(),g=r.xvar.scrollContentHeight,f=r.xvar.scrollContentWidth,p=r.$.scroller["vertical-bar"].height(),v=r.$.scroller["horizontal-bar"].width(),b={vertical:function(e){var i=t.util.getMousePosition(e),o=i.clientY-l.top;return 0>o?o=0:o+d.height>s.height&&(o=s.height-d.height),{top:o}},horizontal:function(e){var i=t.util.getMousePosition(e),o=i.clientX-l.left;return 0>o?o=0:o+d.width>s.width&&(o=s.width-d.width),{left:o}}},m=b[a](n);o.css(m);var w=i[a].call(r,m,{_content_width:f,_content_height:g,_panel_width:x,_panel_height:c,_horizontal_scroller_width:u,_vertical_scroller_height:h,verticalScrollBarHeight:p,horizontalScrollBarWidth:v});"horizontal"===a&&t.header.scrollTo.call(r,w),t.body.scrollTo.call(r,w)},on:function(e,o,n){var r=this,l=o.position(),d={width:o.width(),height:o.height()},s={width:e.innerWidth(),height:e.innerHeight()},h=r.$.scroller.vertical.innerHeight(),c=r.$.panel.body.height(),u=r.$.scroller.horizontal.innerWidth(),x=r.$.panel.body.width(),g=r.xvar.scrollContentHeight,f=r.xvar.scrollContentWidth,p=r.$.scroller["vertical-bar"].height(),v=r.$.scroller["horizontal-bar"].width(),b={vertical:function(e){var i=t.util.getMousePosition(e);r.xvar.__da=i.clientY-r.xvar.mousePosition.clientY;var o=l.top+r.xvar.__da;return 0>o?o=0:o+d.height>s.height&&(o=s.height-d.height),{top:o}},horizontal:function(e){
var i=t.util.getMousePosition(e);r.xvar.__da=i.clientX-r.xvar.mousePosition.clientX;var o=l.left+r.xvar.__da;return 0>o?o=0:o+d.width>s.width&&(o=s.width-d.width),{left:o}}};r.xvar.__da=0,jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(e){var a=b[n](e);o.css(a);var l=i[n].call(r,a,{_content_width:f,_content_height:g,_panel_width:x,_panel_height:c,_horizontal_scroller_width:u,_vertical_scroller_height:h,verticalScrollBarHeight:p,horizontalScrollBarWidth:v});"horizontal"===n&&t.header.scrollTo.call(r,l),t.body.scrollTo.call(r,l)}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){a.off.call(r)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){a.off.call(r)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},n={wheel:function(e){var i,o,a=this,n=a.$.panel["body-scroll"].position(),r=a.$.panel.body.height(),d=a.$.panel.body.width(),s=a.xvar.scrollContentHeight,h=a.xvar.scrollContentWidth,c=!1,u=!1;return i=n.left-e.x,o=n.top-e.y,o>=0?(o=0,c=!0):r-s>=o?(o=r-s,o>=0&&(o=0),c=!0):0==e.y&&(c=!0),i>=0?(i=0,u=!0):d-h>=i?(i=d-h,i>=0&&(i=0),u=!0):0==e.x&&(u=!0),t.header.scrollTo.call(this,{left:i}),t.body.scrollTo.call(this,{left:i,top:o}),l.call(this),!c||!u},on:function(){var i=this,o=i.$.panel["body-scroll"].position(),a=i.$.panel.body.height(),r=i.$.panel.body.width(),d=i.xvar.scrollContentHeight,s=i.xvar.scrollContentWidth,h=function(e){var n,l,h=t.util.getMousePosition(e);return i.xvar.__x_da=h.clientX-i.xvar.mousePosition.clientX,i.xvar.__y_da=h.clientY-i.xvar.mousePosition.clientY,n=o.left+i.xvar.__x_da,l=o.top+i.xvar.__y_da,l>=0?l=0:a-d>=l&&(l=a-d,l>=0&&(l=0)),n>=0?n=0:r-s>=n&&(n=r-s,n>=0&&(n=0)),{left:n,top:l}};this.xvar.__x_da=0,this.xvar.__y_da=0,jQuery(document.body).bind("touchmove.ax5grid-"+this.instanceId,function(o){var a=h(o);t.header.scrollTo.call(i,{left:a.left}),t.body.scrollTo.call(i,a,"noRepaint"),l.call(i),e.stopEvent(o)}).bind("touchend.ax5grid-"+this.instanceId,function(o){var a=h(o);t.header.scrollTo.call(i,{left:a.left}),t.body.scrollTo.call(i,a),l.call(i),e.stopEvent(o),n.off.call(i)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind("touchmove.ax5grid-"+this.instanceId).unbind("touchend.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},r=function(){var i=this,o=4;this.$.scroller["vertical-bar"].css({width:this.config.scroller.size-(o+1),left:o/2}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size-(o+1),top:o/2}),this.$.scroller["vertical-bar"].bind(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),a.on.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical")}.bind(this)).bind("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.vertical.bind("click",function(t){t.target&&"vertical"==t.target.getAttribute("data-ax5grid-scroller")&&a.click.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",t)}.bind(this)),this.$.scroller["horizontal-bar"].bind(t.util.ENM.mousedown,function(e){this.xvar.mousePosition=t.util.getMousePosition(e),a.on.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal")}.bind(this)).bind("dragstart",function(t){return e.stopEvent(t),!1}),this.$.scroller.horizontal.bind("click",function(t){t.target&&"horizontal"==t.target.getAttribute("data-ax5grid-scroller")&&a.click.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",t)}.bind(this)),this.$.container.body.bind("mousewheel DOMMouseScroll",function(t){var i=t.originalEvent,o={x:0,y:0};i.detail?o.y=10*i.detail:"undefined"==typeof i.deltaY?(o.y=-i.wheelDelta,o.x=0):(o.y=i.deltaY,o.x=i.deltaX),n.wheel.call(this,o)&&e.stopEvent(t)}.bind(this)),document.addEventListener&&ax5.info.supportTouch&&this.$.container.body.on("touchstart","[data-ax5grid-panel]",function(e){i.xvar.mousePosition=t.util.getMousePosition(e),n.on.call(i)})},l=function(){var t=this.$.scroller.vertical.height(),e=this.$.scroller.horizontal.width(),i=this.$.panel.body.height(),a=this.$.panel.body.width(),n=this.xvar.scrollContentHeight,r=this.xvar.scrollContentWidth,l=i*t/n,d=a*e/r;l<this.config.scroller.barMinSize&&(l=this.config.scroller.barMinSize),d<this.config.scroller.barMinSize&&(d=this.config.scroller.barMinSize),this.$.scroller["vertical-bar"].css({top:o.vertical.call(this,this.$.panel["body-scroll"].position().top,{_content_width:r,_content_height:n,_panel_width:a,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:l,horizontalScrollBarWidth:d}),height:l}),this.$.scroller["horizontal-bar"].css({left:o.horizontal.call(this,this.$.panel["body-scroll"].position().left,{_content_width:r,_content_height:n,_panel_width:a,_panel_height:i,_horizontal_scroller_width:e,_vertical_scroller_height:t,verticalScrollBarHeight:l,horizontalScrollBarWidth:d}),width:d}),t=null,e=null,i=null,a=null,n=null,r=null,l=null,d=null};t.scroller={init:r,resize:l}}(),function(){var t=ax5.ui.grid,e='<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="hidden">\n                <textarea data-ax5grid-form="clipboard"></textarea>\n            </div>\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header">\n                    <div data-ax5grid-panel-scroll="header"></div>\n                </div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body">\n                    <div data-ax5grid-panel-scroll="top-body"></div>\n                </div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body">\n                    <div data-ax5grid-panel-scroll="aside-body"></div>\n                </div>\n                <div data-ax5grid-panel="left-body">\n                    <div data-ax5grid-panel-scroll="left-body"></div>\n                </div>\n                <div data-ax5grid-panel="body">\n                    <div data-ax5grid-panel-scroll="body"></div>\n                </div>\n                <div data-ax5grid-panel="right-body">\n                  <div data-ax5grid-panel-scroll="right-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body">\n                    <div data-ax5grid-panel-scroll="bottom-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n            <div data-ax5grid-container="page">\n                <div data-ax5grid-page="navigation"></div>\n                <div data-ax5grid-page="status"></div>\n            </div>\n            <div data-ax5grid-container="scroller">\n                <div data-ax5grid-scroller="vertical">\n                    <div data-ax5grid-scroller="vertical-bar"></div>    \n                </div>\n                <div data-ax5grid-scroller="horizontal">\n                    <div data-ax5grid-scroller="horizontal-bar"></div>\n                </div>\n                <div data-ax5grid-scroller="corner"></div>\n            </div>\n        </div>',i="",o="";t.tmpl={main:e,page_navigation:i,page_status:o,get:function(e,i){return ax5.mustache.render(t.tmpl[e],i)}}}(),function(){var t=ax5.ui.grid,e=function(t,e){for(var i={rows:[]},o={rows:[]},a=0,n=t.rows.length;n>a;a++){var r=t.rows[a];i.rows[a]={cols:[]},o.rows[a]={cols:[]};for(var l=0,d=r.cols.length;d>l;l++){var s=jQuery.extend({},r.cols[l]),h=s.colIndex,c=s.colIndex+s.colspan;if(e>h)if(e>=c)i.rows[a].cols.push(s);else{var u=jQuery.extend({},s),x=jQuery.extend({},u);u.colspan=e-u.colIndex,x.colIndex=e,x.colspan=s.colspan-u.colspan,i.rows[a].cols.push(u),o.rows[a].cols.push(x)}else o.rows[a].cols.push(s)}}return{leftData:i,rightData:o}},i=function(t){var e,i=t.originalEvent?t.originalEvent:t;return e="changedTouches"in i?i.changedTouches[0]:i,{clientX:e.pageX,clientY:e.pageY}},o={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"};t.util={divideTableByFrozenColumnIndex:e,getMousePosition:i,ENM:o}}();