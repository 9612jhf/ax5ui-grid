"use strict";!function(){var t,i=ax5.ui,o=ax5.util;i.addClass({className:"grid",version:"0.0.3"},function(){var e=function(){var e;this.config={clickEventName:"click",theme:"default",animateTime:250,frozenColumnIndex:0,frozenRowIndex:0,rightSum:!1,footSum:!1,showLineNumber:!1,showRowSelector:!1,height:400,columnMinWidth:100,asideColumnWidth:30,header:{columnHeight:23,columnPadding:3,columnBorderWidth:1},body:{columnHeight:23,columnPadding:3,columnBorderWidth:1},scroller:{size:15}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0},this.colGroup=[],this.data=[],e=this.config;var a=function(t){var i={rows:[]},o=0,a=function n(t,a,r){for(var l={cols:[]},d=0,s=t.length;s>d;d++){var h=t[d],c=1;h.hidden||(h.colspan=1,h.rowspan=1,h.rowIndex=a,h.colIndex=function(){return r?(o=r.colIndex+d+1,r.colIndex+d):o++}(),l.cols.push(h),"columns"in h?c=n(h.columns,a+1,h):h.width="width"in h?h.width:e.columnMinWidth,h.colspan=c)}return l.cols.length>0?(i.rows[a]||(i.rows[a]={cols:[]}),i.rows[a].cols=i.rows[a].cols.concat(l.cols),l.cols.length-1+c):c};return a(t,0),function(){for(var t=0,o=i.rows.length;o>t;t++)for(var e=i.rows[t],a=0,n=e.cols.length;n>a;a++){var r=e.cols[a];"columns"in r||(r.rowspan=o-t)}}(),i},n=function(){var i={instanceId:this.id};return this.$target.html(t.tmpl.get("main",i)),this.$={container:{root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')}},this.$.container.root.css({height:e.height}),this},r=function(t){this.columns=o.deepCopy(t),this.headerTable=a.call(this,this.columns);for(var i={},e=0,n=this.headerTable.rows.length;n>e;e++)for(var r=this.headerTable.rows[e],l=0,d=r.cols.length;d>l;l++)i[r.cols[l].colIndex]=jQuery.extend({},r.cols[l]);this.colGroup=[];for(var s in i)this.colGroup.push(i[s]);return this},l=function(){var t,i,e,a=this.$.container.root.width(),n=0,r=[],l=this.colGroup;for(i=0,e=l.length;e>i;i++)o.isNumber(l[i].width)?n+=l[i]._width=l[i].width:"*"===l[i].width?r.push(i):"%"===o.right(l[i].width,1)&&(n+=l[i]._width=a*o.left(l[i].width,"%")/100);if(r.length>0)for(t=(a-n)/r.length,i=0,e=r.length;e>i;i++)l[r[i]]._width=t},d=function(t){var i=this.$.container.root.width(),o=this.$.container.root.height(),a=i,n=o,r=e.asidePanelWidth=function(){var t=0;return e.showLineNumber&&(t+=e.asideColumnWidth),e.showRowSelector&&(t+=e.asideColumnWidth),t}(),l=e.frozenPanelWidth=function(t,i){for(var o=0,e=0,a=i;a>e;e++)o+=t[e]._width;return o}(this.colGroup,e.frozenColumnIndex),d=0,s=function(t){return e.frozenRowIndex*t}(this.xvar.bodyTrHeight),h=0,c=this.headerTable.rows.length*e.header.columnHeight,u=function(){return o-c<this.data.length*this.xvar.bodyTrHeight?this.config.scroller.size:0}.call(this),g=function(){for(var t=0,o=i-r-u,e=0,a=this.colGroup.length;a>e;e++)t+=this.colGroup[e]._width;return t>o?this.config.scroller.size:0}.call(this);a=i-u,n=o-g;var p=n-c,f=function(t,i,o,n){var u={},g=!1;switch(o){case"aside":0===r?g=!0:(u.left=0,u.width=r);break;case"left":0===e.frozenColumnIndex?g=!0:(u.left=r,u.width=l);break;case"right":e.rightSum||(g=!0);break;default:0===e.frozenColumnIndex?u.left=r:u.left=l+r,u.width=a-r-l-d}if(g)return this;if("body"===n)switch(i){case"top":0==e.frozenRowIndex?g=!0:(u.top=0,u.height=s);break;case"bottom":e.footSum?(u.top=p-h,u.height=h):g=!0;break;default:u.top=s,u.height=p-s-h}else"header"===n&&(u.height=c);return g?(t.hide(),this):(t.css(u),this)},b=function(t,i,o,e){var r={},l=!1;switch(e){case"vertical":i>0?(r.width=i,r.height=n,r.bottom=o):l=!0;break;case"horizontal":o>0?(r.width=a,r.height=o,r.right=i):l=!0;break;case"corner":i>0&&o>0?(r.width=i,r.height=o):l=!0}return l?(t.hide(),this):void t.show().css(r)};this.$.container.header.css({height:c}),this.$.container.body.css({height:p}),f.call(this,this.$.panel["aside-header"],"","aside","header"),f.call(this,this.$.panel["left-header"],"","left","header"),f.call(this,this.$.panel.header,"","","header"),f.call(this,this.$.panel["right-header"],"","right","header"),f.call(this,this.$.panel["top-aside-body"],"top","aside","body"),f.call(this,this.$.panel["top-left-body"],"top","left","body"),f.call(this,this.$.panel["top-body"],"top","","body"),f.call(this,this.$.panel["top-right-body"],"top","right","body"),f.call(this,this.$.panel["aside-body"],"","aside","body"),f.call(this,this.$.panel["left-body"],"","left","body"),f.call(this,this.$.panel.body,"","","body"),f.call(this,this.$.panel["right-body"],"","right","body"),f.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),f.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),f.call(this,this.$.panel["bottom-body"],"bottom","","body"),f.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),b.call(this,this.$.scroller.vertical,u,g,"vertical"),b.call(this,this.$.scroller.horizontal,u,g,"horizontal"),b.call(this,this.$.scroller.corner,u,g,"corner")};this.init=function(i){this.onStateChanged=e.onStateChanged,this.onClick=e.onClick;var a=this.gridConfig=jQuery.extend(!0,{},e,i);return a.target?(this.$target=jQuery(a.target),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+ax5.getGuid(),this.$target.data("data-ax5grid-id",a.id)),function(t){o.isObject(t)&&!t.error&&(a=jQuery.extend(!0,a,t))}(o.parseJson(this.$target.attr("data-ax5grid-config"),!0)),n.call(this),r.call(this,a.columns),l.call(this),d.call(this,!0),t.header.init.call(this),t.header.repaint.call(this),t.body.init.call(this),t.body.repaint.call(this),t.scroller.init.call(this),t.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.instanceId,function(){d.call(this),t.scroller.resize.call(this)}.bind(this)),this):(console.log(ax5.info.getError("ax5grid","401","init")),this)},this.align=function(){return d.call(this),t.scroller.resize.call(this),this},this.setData=function(i){return t.data.set.call(this,i),d.call(this),t.body.repaint.call(this),t.scroller.resize.call(this),this},this.main=function(){i.grid_instance=i.grid_instance||[],i.grid_instance.push(this),arguments&&o.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return e}()),t=ax5.ui.grid}(),function(){var t=ax5.ui.grid,i=(ax5.util,function(){this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowTable=o.call(this,this.columns),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight}),o=function(t){var i={rows:[]},o=0,e=function a(t,e,n){for(var r={cols:[]},l=0,d=t.length,s=(function u(t){for(var i=0,l=t.length;l>i;i++){var d=t[i],s=1;d.hidden||("key"in d?(d.colspan=1,d.rowspan=1,d.rowIndex=e,d.colIndex=function(){return n?(o=n.colIndex+i+1,n.colIndex+i):o++}(),r.cols.push(d),"columns"in d&&(s=a(d.columns,e+1,d)),d.colspan=s):"columns"in d&&u(d.columns,e))}});d>l;l++){var h=t[l],c=1;h.hidden||("key"in h?(h.colspan=1,h.rowspan=1,h.rowIndex=e,h.colIndex=function(){return n?(o=n.colIndex+l+1,n.colIndex+l):o++}(),r.cols.push(h),"columns"in h&&(c=a(h.columns,e+1,h)),h.colspan=c):"columns"in h&&s(h.columns,e))}return r.cols.length>0?(i.rows[e]||(i.rows[e]={cols:[]}),i.rows[e].cols=i.rows[e].cols.concat(r.cols),r.cols.length-1+c):c};return e(t,0),function(){for(var t=0,o=i.rows.length;o>t;t++)for(var e=i.rows[t],a=0,n=e.cols.length;n>a;a++){var r=e.cols[a];"columns"in r||(r.rowspan=o-t)}}(),i},e=function(){var i=this.config,o=t.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.config.frozenColumnIndex),e=this.asideBodyRowData=function(t){for(var o={rows:[]},e=0,a=t.rows.length;a>e;e++)if(o.rows[e]={cols:[]},0===e){var n={width:i.asideColumnWidth,_width:i.asideColumnWidth,label:"",colspan:1,rowspan:t.rows.length,colIndex:null},r={};i.showLineNumber&&(r=jQuery.extend({},n,{label:"&nbsp;",key:"__d-index__"}),o.rows[e].cols.push(r)),i.showRowSelector&&(r=jQuery.extend({},n,{label:"",key:"__d-checkbox__"}),o.rows[e].cols.push(r))}return o}.call(this,this.bodyRowTable),a=this.leftBodyRowData=o.leftData,n=this.bodyRowData=o.rightData,r=this.data,l=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,d=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+i.frozenRowIndex;if(this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(this.data.length-i.frozenRowIndex),this.xvar.dataRowCount===r.length&&this.xvar.paintStartRowIndex===d)return this;var s=function(t,o,e,a,n){var r,l,d,s,h,c,u,g,p,f,b,x=[],v=function(){return"undefined"==typeof n||"undefined"==typeof n.paintStartRowIndex?(n={paintStartRowIndex:0,paintRowCount:a.length},!1):!0}(),w=function(t,i,o){return"__d-index__"===o?i+1:"__d-checkbox__"===o?"C":t[o]||"&nbsp;"};for(x.push('<table border="0" cellpadding="0" cellspacing="0">'),x.push("<colgroup>"),r=0,l=o.length;l>r;r++)x.push('<col style="width:'+o[r]._width+'px;"  />');for(x.push("<col  />"),x.push("</colgroup>"),d=n.paintStartRowIndex,s=function(){var t;return t=a.length,n.paintRowCount+n.paintStartRowIndex<t&&(t=n.paintRowCount+n.paintStartRowIndex),t}();s>d;d++)for(h=0,c=e.rows.length;c>h;h++){for(x.push('<tr class="tr-'+d%4+'" data-ax5grid-data-index="'+d+'">'),u=0,g=e.rows[h].cols.length;g>u;u++)p=e.rows[h].cols[u],f=i.body.columnHeight*p.rowspan-i.body.columnBorderWidth,b="",i.body.columnBorderWidth&&(b+="hasBorder "),u==g-1&&(b+="isLastColumn "),x.push("<td ",'data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+u+'" ','data-ax5grid-data-index="'+d+'" ','colspan="'+p.colspan+'" rowspan="'+p.rowspan+'" ','class="'+b+'" ','style="height: '+f+'px;min-height: 1px;">'),x.push(function(){var t=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return p.multiLine?'<span data-ax5grid-cellHolder="multiLine" style="height:'+f+"px;line-height: "+t+'px;">':'<span data-ax5grid-cellHolder="" style="height: '+(i.body.columnHeight-i.body.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),w.call(this,a[d],d,p.key),"</span>"),x.push("</td>");x.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+d+'" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>"),x.push("</tr>")}x.push("</table>"),v&&t.css({paddingTop:(n.paintStartRowIndex-i.frozenRowIndex)*i.body.columnHeight}),t.html(x.join(""))};i.asidePanelWidth>0&&(i.frozenRowIndex>0&&s(this.$.panel["top-aside-body"],this.asideColGroup,e,r.slice(0,i.frozenRowIndex)),s(this.$.panel["aside-body-scroll"],this.asideColGroup,e,r,{paintStartRowIndex:d,paintRowCount:l}),i.footSum&&s(this.$.panel["bottom-aside-body"],this.asideColGroup,e,r)),i.frozenColumnIndex>0&&(i.frozenRowIndex>0&&s(this.$.panel["top-left-body"],this.leftHeaderColGroup,a,r.slice(0,i.frozenRowIndex)),s(this.$.panel["left-body-scroll"],this.leftHeaderColGroup,a,r,{paintStartRowIndex:d,paintRowCount:l}),i.footSum),i.frozenRowIndex>0&&s(this.$.panel["top-body-scroll"],this.headerColGroup,n,r.slice(0,i.frozenRowIndex)),s(this.$.panel["body-scroll"],this.headerColGroup,n,r,{paintStartRowIndex:d,paintRowCount:l}),i.footSum,i.rightSum,this.xvar.paintStartRowIndex=d,this.xvar.dataRowCount=r.length},a=function(t,i){var o=this.config;o.asidePanelWidth>0&&"vertical"===i&&this.$.panel["aside-body-scroll"].css(t),o.frozenColumnIndex>0&&"vertical"===i&&this.$.panel["left-body-scroll"].css(t),o.frozenRowIndex>0&&"horizontal"===i&&this.$.panel["top-body-scroll"].css(t),this.$.panel["body-scroll"].css(t),"vertical"===i&&e.call(this)},n=function(){};t.body={init:i,repaint:e,setData:n,scrollTo:a}}(),function(){var t=ax5.ui.grid,i=ax5.util,o=function(){},e=function(t){return this.data=i.deepCopy(t),this},a=function(){};t.data={init:o,set:e,get:a}}(),function(){var t=ax5.ui.grid,i=(ax5.util,function(){this.leftHeaderData={},this.headerData={},this.rightHeaderData={}}),o=function(){var i=this.config,o=t.util.divideTableByFrozenColumnIndex(this.headerTable,this.config.frozenColumnIndex),e=this.asideHeaderData=function(t){for(var o=[],e={rows:[]},a=0,n=t.rows.length;n>a;a++)if(e.rows[a]={cols:[]},0===a){var r={width:i.asideColumnWidth,_width:i.asideColumnWidth,label:"",colspan:1,rowspan:t.rows.length,key:"__dindex__",colIndex:null},l={};i.showLineNumber&&(l=jQuery.extend({},r,{label:"&nbsp;"}),o.push(l),e.rows[a].cols.push(l)),i.showRowSelector&&(l=jQuery.extend({},r,{label:""}),o.push(l),e.rows[a].cols.push(l))}return this.asideColGroup=o,e}.call(this,this.headerTable),a=this.leftHeaderData=o.leftData,n=this.headerData=o.rightData;this.leftHeaderColGroup=this.colGroup.slice(0,this.config.frozenColumnIndex),this.headerColGroup=this.colGroup.slice(this.config.frozenColumnIndex);var r=function(t,o,e){var a=0,n=[];n.push('<table border="0" cellpadding="0" cellspacing="0">'),n.push("<colgroup>");for(var r=0,l=o.length;l>r;r++)n.push('<col style="width:'+o[r]._width+'px;"  />'),a+=o[r]._width;n.push("<col  />"),n.push("</colgroup>");for(var d=0,s=e.rows.length;s>d;d++){var h="";n.push('<tr class="'+h+'">');for(var c=0,u=e.rows[d].cols.length;u>c;c++){var g=e.rows[d].cols[c],p=i.header.columnHeight*g.rowspan-i.header.columnBorderWidth,f="";i.header.columnBorderWidth&&(f+="hasBorder "),c==u-1&&(f+="isLastColumn "),n.push("<td ",'data-ax5grid-column-row="'+d+'" ','data-ax5grid-column-col="'+c+'" ','colspan="'+g.colspan+'" rowspan="'+g.rowspan+'" ','class="'+f+'" ','style="height: '+p+'px;min-height: 1px;">'),n.push(function(){var t=i.header.columnHeight-2*i.header.columnPadding-i.header.columnBorderWidth;return g.multiLine?'<span data-ax5grid-cellHolder="multiLine" style="height:'+p+"px;line-height: "+t+'px;">':'<span data-ax5grid-cellHolder="" style="height: '+(i.header.columnHeight-i.header.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),g.label||"&nbsp;","</span>"),n.push("</td>")}n.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','style="height: '+i.header.columnHeight+'px;min-height: 1px;" ',"></td>"),n.push("</tr>")}return n.push("</table>"),t.html(n.join("")),a};i.asidePanelWidth>0&&r(this.$.panel["aside-header"],this.asideColGroup,e),i.frozenColumnIndex>0&&r(this.$.panel["left-header"],this.leftHeaderColGroup,a),this.xvar.scrollContentWidth=r(this.$.panel["header-scroll"],this.headerColGroup,n),i.rightSum},e=function(t){this.$.panel["header-scroll"].css(t)};t.header={init:i,repaint:o,scrollTo:e}}(),function(){var t=ax5.ui.grid,i=ax5.util,o={vertical:function(t,i){var o=i._content_height*t.top/i._vertical_scroller_height;return 0>o?o=0:i._content_height-i._panel_height<o&&(o=i._content_height-i._panel_height),{top:-o}},horizontal:function(t,i){var o=i._content_width*t.left/i._horizontal_scroller_width;return 0>o?o=0:i._content_width-i._panel_width<o&&(o=i._content_width-i._panel_width),{left:-o}}},e={on:function(i,a,n){var r=this,l=a.position(),d={width:a.width(),height:a.height()},s={width:i.innerWidth(),height:i.innerHeight()},h=r.$.scroller.vertical.innerHeight(),c=r.$.panel.body.height(),u=r.$.scroller.horizontal.innerWidth(),g=r.$.panel.body.width(),p=this.xvar.scrollContentHeight,f=this.xvar.scrollContentWidth,b={vertical:function(i){var o=t.util.getMousePosition(i);r.xvar.__da=o.clientY-r.xvar.mousePosition.clientY;var e=l.top+r.xvar.__da;return 0>e?e=0:e+d.height>s.height&&(e=s.height-d.height),{top:e}},horizontal:function(i){var o=t.util.getMousePosition(i);r.xvar.__da=o.clientX-r.xvar.mousePosition.clientX;var e=l.left+r.xvar.__da;return 0>e?e=0:e+d.width>s.width&&(e=s.width-d.width),{left:e}}};r.xvar.__da=0,jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(i){var e=b[n](i);a.css(e);var l=o[n].call(r,e,{_content_width:f,_content_height:p,_panel_width:g,_panel_height:c,_horizontal_scroller_width:u,_vertical_scroller_height:h});"horizontal"===n&&t.header.scrollTo.call(r,l),t.body.scrollTo.call(r,l,n)}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){e.off.call(r)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){e.off.call(r)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},a=function(){var o=4;this.$.scroller["vertical-bar"].css({width:this.config.scroller.size-(o+1),left:o/2}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size-(o+1),top:o/2}),this.$.scroller["vertical-bar"].bind(t.util.ENM.mousedown,function(i){this.xvar.mousePosition=t.util.getMousePosition(i),e.on.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical")}.bind(this)).bind("dragstart",function(t){return i.stopEvent(t),!1}),this.$.scroller.vertical.bind("click",function(t){}.bind(this)),this.$.scroller["horizontal-bar"].bind(t.util.ENM.mousedown,function(i){this.xvar.mousePosition=t.util.getMousePosition(i),e.on.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal")}.bind(this)).bind("dragstart",function(t){return i.stopEvent(t),!1}),this.$.scroller.horizontal.bind("click",function(t){}.bind(this))},n=function(){var i=this.$.scroller.vertical.height(),e=this.$.scroller.horizontal.width(),a=this.$.panel.body.height(),n=this.$.panel.body.width(),r=this.xvar.scrollContentHeight,l=this.xvar.scrollContentWidth,d=a*i/r,s=n*e/l,h={vertical:function(s){var h="vertical",c=i*s/r;if(d-c>i){c=d-i;var u=o[h].call(this,{top:-c},{_content_width:l,_content_height:r,_panel_width:n,_panel_height:a,_horizontal_scroller_width:e,_vertical_scroller_height:i});t.body.scrollTo.call(this,u,h)}return-c},horizontal:function(d){var h="horizontal",c=e*d/l;if(s-c>e){c=s-e;var u=o[h].call(this,{left:-c},{_content_width:l,_content_height:r,_panel_width:n,_panel_height:a,_horizontal_scroller_width:e,_vertical_scroller_height:i});t.header.scrollTo.call(this,u),t.body.scrollTo.call(this,u,h)}return-c}};this.$.scroller["vertical-bar"].css({top:h.vertical.call(this,this.$.panel["body-scroll"].position().top),height:d}),this.$.scroller["horizontal-bar"].css({left:h.horizontal.call(this,this.$.panel["body-scroll"].position().left),width:s}),i=null,e=null,a=null,n=null,r=null,l=null,d=null,s=null};t.scroller={init:a,resize:n}}(),function(){var t=ax5.ui.grid,i='<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header">\n                    <div data-ax5grid-panel-scroll="header"></div>\n                </div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body">\n                    <div data-ax5grid-panel-scroll="top-body"></div>\n                </div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body">\n                    <div data-ax5grid-panel-scroll="aside-body"></div>\n                </div>\n                <div data-ax5grid-panel="left-body">\n                    <div data-ax5grid-panel-scroll="left-body"></div>\n                </div>\n                <div data-ax5grid-panel="body">\n                    <div data-ax5grid-panel-scroll="body"></div>\n                </div>\n                <div data-ax5grid-panel="right-body">\n                  <div data-ax5grid-panel-scroll="right-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body">\n                    <div data-ax5grid-panel-scroll="bottom-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n            <div data-ax5grid-container="scroller">\n                <div data-ax5grid-scroller="vertical">\n                    <div data-ax5grid-scroller="vertical-bar"></div>    \n                </div>\n                <div data-ax5grid-scroller="horizontal">\n                    <div data-ax5grid-scroller="horizontal-bar"></div>\n                </div>\n                <div data-ax5grid-scroller="corner"></div>\n            </div>\n        </div>';t.tmpl={main:i,get:function(i,o){return ax5.mustache.render(t.tmpl[i],o)}}}(),function(){var t=ax5.ui.grid,i=function(t,i){for(var o={rows:[]},e={rows:[]},a=0,n=t.rows.length;n>a;a++){var r=t.rows[a];o.rows[a]={cols:[]},e.rows[a]={cols:[]};for(var l=0,d=r.cols.length;d>l;l++){var s=jQuery.extend({},r.cols[l]),h=s.colIndex,c=s.colIndex+s.colspan;if(i>h)if(i>=c)o.rows[a].cols.push(s);else{var u=jQuery.extend({},s),g=jQuery.extend({},u);u.colspan=i-u.colIndex,g.colIndex=i,g.colspan=s.colspan-u.colspan,o.rows[a].cols.push(u),e.rows[a].cols.push(g)}else e.rows[a].cols.push(s)}}return{leftData:o,rightData:e}},o=function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;return{clientX:i.clientX,clientY:i.clientY}},e={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"};t.util={divideTableByFrozenColumnIndex:i,getMousePosition:o,ENM:e}}();