"use strict";!function(){var t,i=ax5.ui,e=ax5.util;i.addClass({className:"grid",version:"0.0.5"},function(){var o=function(){var o;this.config={clickEventName:"click",theme:"default",animateTime:250,frozenColumnIndex:0,frozenRowIndex:0,rightSum:!1,footSum:!1,showLineNumber:!1,showRowSelector:!1,height:400,columnMinWidth:100,lineNumberColumnWidth:30,rowSelectorColumnWidth:30,header:{columnHeight:23,columnPadding:3,columnBorderWidth:1},body:{columnHeight:23,columnPadding:3,columnBorderWidth:1},scroller:{size:15,barMinSize:15}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0},this.colGroup=[],this.data=[],o=this.config;var r=function(t){var i={rows:[]},e=0,r=function l(t,r,a){for(var n={cols:[]},d=0,h=t.length;h>d;d++){var s=t[d],c=1;s.hidden||(s.colspan=1,s.rowspan=1,s.rowIndex=r,s.colIndex=function(){return a?(e=a.colIndex+d+1,a.colIndex+d):e++}(),n.cols.push(s),"columns"in s?c=l(s.columns,r+1,s):s.width="width"in s?s.width:o.columnMinWidth,s.colspan=c)}return n.cols.length>0?(i.rows[r]||(i.rows[r]={cols:[]}),i.rows[r].cols=i.rows[r].cols.concat(n.cols),n.cols.length-1+c):c};return r(t,0),function(){for(var t=0,e=i.rows.length;e>t;t++)for(var o=i.rows[t],r=0,l=o.cols.length;l>r;r++){var a=o.cols[r];"columns"in a||(a.rowspan=e-t)}}(),i},l=function(){var i={instanceId:this.id};return this.$target.html(t.tmpl.get("main",i)),this.$={container:{root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')}},this.$.container.root.css({height:o.height}),this},a=function(t){this.columns=e.deepCopy(t),this.headerTable=r.call(this,this.columns);for(var i={},o=0,l=this.headerTable.rows.length;l>o;o++)for(var a=this.headerTable.rows[o],n=0,d=a.cols.length;d>n;n++)i[a.cols[n].colIndex]=jQuery.extend({},a.cols[n]);this.colGroup=[];for(var h in i)this.colGroup.push(i[h]);return this},n=function(){var t,i,o,r=this.$.container.root.width(),l=0,a=[],n=this.colGroup;for(i=0,o=n.length;o>i;i++)e.isNumber(n[i].width)?l+=n[i]._width=n[i].width:"*"===n[i].width?a.push(i):"%"===e.right(n[i].width,1)&&(l+=n[i]._width=r*e.left(n[i].width,"%")/100);if(a.length>0)for(t=(r-l)/a.length,i=0,o=a.length;o>i;i++)n[a[i]]._width=t},d=function(t){var i=this.$.container.root.width(),e=this.$.container.root.height(),r=i,l=e,a=o.asidePanelWidth=function(){var t=0;return o.showLineNumber&&(t+=o.lineNumberColumnWidth),o.showRowSelector&&(t+=o.rowSelectorColumnWidth),t}(),n=o.frozenPanelWidth=function(t,i){for(var e=0,o=0,r=i;r>o;o++)e+=t[o]._width;return e}(this.colGroup,o.frozenColumnIndex),d=0,h=function(t){return o.frozenRowIndex*t}(this.xvar.bodyTrHeight),s=0,c=this.headerTable.rows.length*o.header.columnHeight,u=function(){return e-c<this.data.length*this.xvar.bodyTrHeight?this.config.scroller.size:0}.call(this),g=function(){for(var t=0,e=i-a-u,o=0,r=this.colGroup.length;r>o;o++)t+=this.colGroup[o]._width;return t>e?this.config.scroller.size:0}.call(this);r=i-u,l=e-g;var p=l-c,f=function(t,i,e,l){var u={},g=!1;switch(e){case"aside":0===a?g=!0:(u.left=0,u.width=a);break;case"left":0===o.frozenColumnIndex?g=!0:(u.left=a,u.width=n);break;case"right":o.rightSum||(g=!0);break;default:0===o.frozenColumnIndex?u.left=a:u.left=n+a,u.width=r-a-n-d}if(g)return this;if("body"===l)switch(i){case"top":0==o.frozenRowIndex?g=!0:(u.top=0,u.height=h);break;case"bottom":o.footSum?(u.top=p-s,u.height=s):g=!0;break;default:u.top=h,u.height=p-h-s}else"header"===l&&(u.height=c);return g?(t.hide(),this):(t.css(u),this)},b=function(t,i,e,o){var a={},n=!1;switch(o){case"vertical":i>0?(a.width=i,a.height=l,a.bottom=e):n=!0;break;case"horizontal":e>0?(a.width=r,a.height=e,a.right=i):n=!0;break;case"corner":i>0&&e>0?(a.width=i,a.height=e):n=!0}return n?(t.hide(),this):void t.show().css(a)};this.$.container.header.css({height:c}),this.$.container.body.css({height:p}),f.call(this,this.$.panel["aside-header"],"","aside","header"),f.call(this,this.$.panel["left-header"],"","left","header"),f.call(this,this.$.panel.header,"","","header"),f.call(this,this.$.panel["right-header"],"","right","header"),f.call(this,this.$.panel["top-aside-body"],"top","aside","body"),f.call(this,this.$.panel["top-left-body"],"top","left","body"),f.call(this,this.$.panel["top-body"],"top","","body"),f.call(this,this.$.panel["top-right-body"],"top","right","body"),f.call(this,this.$.panel["aside-body"],"","aside","body"),f.call(this,this.$.panel["left-body"],"","left","body"),f.call(this,this.$.panel.body,"","","body"),f.call(this,this.$.panel["right-body"],"","right","body"),f.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),f.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),f.call(this,this.$.panel["bottom-body"],"bottom","","body"),f.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),b.call(this,this.$.scroller.vertical,u,g,"vertical"),b.call(this,this.$.scroller.horizontal,u,g,"horizontal"),b.call(this,this.$.scroller.corner,u,g,"corner")};this.init=function(i){this.onStateChanged=o.onStateChanged,this.onClick=o.onClick;var r=this.gridConfig=jQuery.extend(!0,{},o,i);return r.target?(this.$target=jQuery(r.target),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+ax5.getGuid(),this.$target.data("data-ax5grid-id",r.id)),function(t){e.isObject(t)&&!t.error&&(r=jQuery.extend(!0,r,t))}(e.parseJson(this.$target.attr("data-ax5grid-config"),!0)),l.call(this),a.call(this,r.columns),n.call(this),d.call(this,!0),t.header.init.call(this),t.header.repaint.call(this),t.body.init.call(this),t.body.repaint.call(this),t.scroller.init.call(this),t.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.instanceId,function(){d.call(this),t.scroller.resize.call(this)}.bind(this)),this):(console.log(ax5.info.getError("ax5grid","401","init")),this)},this.align=function(){return d.call(this),t.scroller.resize.call(this),this},this.setData=function(i){return t.data.set.call(this,i),d.call(this),t.body.repaint.call(this),t.scroller.resize.call(this),this},this.main=function(){i.grid_instance=i.grid_instance||[],i.grid_instance.push(this),arguments&&e.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return o}()),t=ax5.ui.grid}(),function(){var t=ax5.ui.grid,i=(ax5.util,function(){this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowTable=e.call(this,this.columns),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight}),e=function(t){var i={rows:[]},e=0,o=function r(t,o,l){for(var a={cols:[]},n=0,d=t.length,h=(function u(t){for(var i=0,n=t.length;n>i;i++){var d=t[i],h=1;d.hidden||("key"in d?(d.colspan=1,d.rowspan=1,d.rowIndex=o,d.colIndex=function(){return l?(e=l.colIndex+i+1,l.colIndex+i):e++}(),a.cols.push(d),"columns"in d&&(h=r(d.columns,o+1,d)),d.colspan=h):"columns"in d&&u(d.columns,o))}});d>n;n++){var s=t[n],c=1;s.hidden||("key"in s?(s.colspan=1,s.rowspan=1,s.rowIndex=o,s.colIndex=function(){return l?(e=l.colIndex+n+1,l.colIndex+n):e++}(),a.cols.push(s),"columns"in s&&(c=r(s.columns,o+1,s)),s.colspan=c):"columns"in s&&h(s.columns,o))}return a.cols.length>0?(i.rows[o]||(i.rows[o]={cols:[]}),i.rows[o].cols=i.rows[o].cols.concat(a.cols),a.cols.length-1+c):c};return o(t,0),function(){for(var t=0,e=i.rows.length;e>t;t++)for(var o=i.rows[t],r=0,l=o.cols.length;l>r;r++){var a=o.cols[r];"columns"in a||(a.rowspan=e-t)}}(),i},o=function(){var i=this.config,e=t.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.config.frozenColumnIndex),o=this.asideBodyRowData=function(t){for(var e={rows:[]},o=0,r=t.rows.length;r>o;o++)if(e.rows[o]={cols:[]},0===o){var l={label:"",colspan:1,rowspan:t.rows.length,colIndex:null},a={};i.showLineNumber&&(a=jQuery.extend({},l,{width:i.lineNumberColumnWidth,_width:i.lineNumberColumnWidth,CSSClass:"lineNumberColumn",label:"&nbsp;",key:"__d-index__"}),e.rows[o].cols.push(a)),i.showRowSelector&&(a=jQuery.extend({},l,{width:i.rowSelectorColumnWidth,_width:i.rowSelectorColumnWidth,CSSClass:"rowSelectorColumn",label:"",key:"__d-checkbox__"}),e.rows[o].cols.push(a))}return e}.call(this,this.bodyRowTable),r=this.leftBodyRowData=e.leftData,l=this.bodyRowData=e.rightData,a=this.data,n=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,d=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+i.frozenRowIndex;if(this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(this.data.length-i.frozenRowIndex),this.xvar.dataRowCount===a.length&&this.xvar.paintStartRowIndex===d)return this;var h=function(t,e,o,r,l){var a,n,d,h,s,c,u,g,p,f,b,v=[],x=function(){return"undefined"==typeof l||"undefined"==typeof l.paintStartRowIndex?(l={paintStartRowIndex:0,paintRowCount:r.length},!1):!0}(),w=function(t,i,e){return"__d-index__"===e?i+1:"__d-checkbox__"===e?'<div class="checkBox"></div>':t[e]||"&nbsp;"};for(v.push('<table border="0" cellpadding="0" cellspacing="0">'),v.push("<colgroup>"),a=0,n=e.length;n>a;a++)v.push('<col style="width:'+e[a]._width+'px;"  />');for(v.push("<col  />"),v.push("</colgroup>"),d=l.paintStartRowIndex,h=function(){var t;return t=r.length,l.paintRowCount+l.paintStartRowIndex<t&&(t=l.paintRowCount+l.paintStartRowIndex),t}();h>d;d++)for(s=0,c=o.rows.length;c>s;s++){for(v.push('<tr class="tr-'+d%4+'" data-ax5grid-data-index="'+d+'">'),u=0,g=o.rows[s].cols.length;g>u;u++)p=o.rows[s].cols[u],f=i.body.columnHeight*p.rowspan-i.body.columnBorderWidth,b="",i.body.columnBorderWidth&&(b+="hasBorder "),u==g-1&&(b+="isLastColumn "),e[p.colIndex]&&e[p.colIndex].CSSClass&&(b+=e[p.colIndex].CSSClass+" "),p.CSSClass&&(b+=p.CSSClass+" "),v.push("<td ",'data-ax5grid-column-row="'+s+'" ','data-ax5grid-column-col="'+u+'" ','data-ax5grid-data-index="'+d+'" ','colspan="'+p.colspan+'" rowspan="'+p.rowspan+'" ','class="'+b+'" ','style="height: '+f+'px;min-height: 1px;">'),v.push(function(){var t=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return p.multiLine?'<span data-ax5grid-cellHolder="multiLine" style="height:'+f+"px;line-height: "+t+'px;">':'<span data-ax5grid-cellHolder="" style="height: '+(i.body.columnHeight-i.body.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),w.call(this,r[d],d,p.key),"</span>"),v.push("</td>");v.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+d+'" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>"),v.push("</tr>")}v.push("</table>"),x&&t.css({paddingTop:(l.paintStartRowIndex-i.frozenRowIndex)*l.bodyTrHeight}),t.html(v.join(""))},s={paintStartRowIndex:d,paintRowCount:n,bodyTrHeight:this.xvar.bodyTrHeight};i.asidePanelWidth>0&&(i.frozenRowIndex>0&&h(this.$.panel["top-aside-body"],this.asideColGroup,o,a.slice(0,i.frozenRowIndex)),h(this.$.panel["aside-body-scroll"],this.asideColGroup,o,a,s),i.footSum&&h(this.$.panel["bottom-aside-body"],this.asideColGroup,o,a)),i.frozenColumnIndex>0&&(i.frozenRowIndex>0&&h(this.$.panel["top-left-body"],this.leftHeaderColGroup,r,a.slice(0,i.frozenRowIndex)),h(this.$.panel["left-body-scroll"],this.leftHeaderColGroup,r,a,s),i.footSum),i.frozenRowIndex>0&&h(this.$.panel["top-body-scroll"],this.headerColGroup,l,a.slice(0,i.frozenRowIndex)),h(this.$.panel["body-scroll"],this.headerColGroup,l,a,s),i.footSum,i.rightSum,this.xvar.paintStartRowIndex=d,this.xvar.dataRowCount=a.length},r=function(t,i){var e=this.config;"undefined"==typeof i?(e.asidePanelWidth>0&&this.$.panel["aside-body-scroll"].css({top:t.top}),e.frozenColumnIndex>0&&this.$.panel["left-body-scroll"].css({top:t.top}),e.frozenRowIndex>0&&this.$.panel["top-body-scroll"].css({left:t.left}),this.$.panel["body-scroll"].css(t),o.call(this)):(e.asidePanelWidth>0&&"vertical"===i&&this.$.panel["aside-body-scroll"].css(t),e.frozenColumnIndex>0&&"vertical"===i&&this.$.panel["left-body-scroll"].css(t),e.frozenRowIndex>0&&"horizontal"===i&&this.$.panel["top-body-scroll"].css(t),this.$.panel["body-scroll"].css(t),"vertical"===i&&o.call(this))},l=function(){};t.body={init:i,repaint:o,setData:l,scrollTo:r}}(),function(){var t=ax5.ui.grid,i=ax5.util,e=function(){},o=function(t){return this.data=i.deepCopy(t),this},r=function(){};t.data={init:e,set:o,get:r}}(),function(){var t=ax5.ui.grid,i=(ax5.util,function(){this.leftHeaderData={},this.headerData={},this.rightHeaderData={}}),e=function(){var i=this.config,e=t.util.divideTableByFrozenColumnIndex(this.headerTable,this.config.frozenColumnIndex),o=this.asideHeaderData=function(t){for(var e=[],o={rows:[]},r=0,l=t.rows.length;l>r;r++)if(o.rows[r]={cols:[]},0===r){var a={label:"",colspan:1,rowspan:t.rows.length,key:"__dindex__",colIndex:null},n={};i.showLineNumber&&(n=jQuery.extend({},a,{label:"&nbsp;",width:i.lineNumberColumnWidth,_width:i.lineNumberColumnWidth}),e.push(n),o.rows[r].cols.push(n)),i.showRowSelector&&(n=jQuery.extend({},a,{label:"",width:i.rowSelectorColumnWidth,_width:i.rowSelectorColumnWidth}),e.push(n),o.rows[r].cols.push(n))}return this.asideColGroup=e,o}.call(this,this.headerTable),r=this.leftHeaderData=e.leftData,l=this.headerData=e.rightData;this.leftHeaderColGroup=this.colGroup.slice(0,this.config.frozenColumnIndex),this.headerColGroup=this.colGroup.slice(this.config.frozenColumnIndex);var a=function(t,e,o){var r=0,l=[];l.push('<table border="0" cellpadding="0" cellspacing="0">'),l.push("<colgroup>");for(var a=0,n=e.length;n>a;a++)l.push('<col style="width:'+e[a]._width+'px;"  />'),r+=e[a]._width;l.push("<col  />"),l.push("</colgroup>");for(var d=0,h=o.rows.length;h>d;d++){var s="";l.push('<tr class="'+s+'">');for(var c=0,u=o.rows[d].cols.length;u>c;c++){var g=o.rows[d].cols[c],p=i.header.columnHeight*g.rowspan-i.header.columnBorderWidth,f="";i.header.columnBorderWidth&&(f+="hasBorder "),c==u-1&&(f+="isLastColumn "),l.push("<td ",'data-ax5grid-column-row="'+d+'" ','data-ax5grid-column-col="'+c+'" ','colspan="'+g.colspan+'" rowspan="'+g.rowspan+'" ','class="'+f+'" ','style="height: '+p+'px;min-height: 1px;">'),l.push(function(){var t=i.header.columnHeight-2*i.header.columnPadding-i.header.columnBorderWidth;return g.multiLine?'<span data-ax5grid-cellHolder="multiLine" style="height:'+p+"px;line-height: "+t+'px;">':'<span data-ax5grid-cellHolder="" style="height: '+(i.header.columnHeight-i.header.columnBorderWidth)+"px;line-height: "+t+'px;">'}(),g.label||"&nbsp;","</span>"),l.push("</td>")}l.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','style="height: '+i.header.columnHeight+'px;min-height: 1px;" ',"></td>"),l.push("</tr>")}return l.push("</table>"),t.html(l.join("")),r};i.asidePanelWidth>0&&a(this.$.panel["aside-header"],this.asideColGroup,o),i.frozenColumnIndex>0&&a(this.$.panel["left-header"],this.leftHeaderColGroup,r),this.xvar.scrollContentWidth=a(this.$.panel["header-scroll"],this.headerColGroup,l),i.rightSum},o=function(t){this.$.panel["header-scroll"].css(t)};t.header={init:i,repaint:e,scrollTo:o}}(),function(){var t=ax5.ui.grid,i=ax5.util,e={vertical:function(t,i){var e=i._content_height-i._panel_height,o=i._vertical_scroller_height-i.verticalScrollBarHeight,r=e*t.top/o;return 0>r?r=0:r>e&&(r=e),{top:-r}},horizontal:function(t,i){var e=i._content_width-i._panel_width,o=i._horizontal_scroller_width-i.horizontalScrollBarWidth,r=e*t.left/o;return 0>r?r=0:r>e&&(r=e),{left:-r}}},o={vertical:function(i,o){var r="vertical",l=o._content_height-o._panel_height,a=o._vertical_scroller_height-o.verticalScrollBarHeight,n=a*i/l;if(-n>a){n=-a;var d=e[r].call(this,{top:-n},{_content_width:o._content_width,_content_height:o._content_height,_panel_width:o._panel_width,_panel_height:o._panel_height,_horizontal_scroller_width:o._horizontal_scroller_width,_vertical_scroller_height:o._vertical_scroller_height,verticalScrollBarHeight:o.verticalScrollBarHeight,horizontalScrollBarWidth:o.horizontalScrollBarWidth});t.body.scrollTo.call(this,d,r)}return-n},horizontal:function(i,o){var r="horizontal",l=o._content_width-o._panel_width,a=o._horizontal_scroller_width-o.horizontalScrollBarWidth,n=a*i/l;if(-n>a){n=-a;var d=e[r].call(this,{left:-n},{_content_width:o._content_width,_content_height:o._content_height,_panel_width:o._panel_width,_panel_height:o._panel_height,_horizontal_scroller_width:o._horizontal_scroller_width,_vertical_scroller_height:o._vertical_scroller_height,verticalScrollBarHeight:o.verticalScrollBarHeight,horizontalScrollBarWidth:o.horizontalScrollBarWidth});t.header.scrollTo.call(this,d),t.body.scrollTo.call(this,d,r)}return-n}},r={click:function(i,o,r,l){var a=this,n=i.offset(),d={width:o.width(),height:o.height()},h={width:i.innerWidth(),height:i.innerHeight()},s=a.$.scroller.vertical.innerHeight(),c=a.$.panel.body.height(),u=a.$.scroller.horizontal.innerWidth(),g=a.$.panel.body.width(),p=a.xvar.scrollContentHeight,f=a.xvar.scrollContentWidth,b=a.$.scroller["vertical-bar"].height(),v=a.$.scroller["horizontal-bar"].width(),x={vertical:function(i){var e=t.util.getMousePosition(i),o=e.clientY-n.top;return 0>o?o=0:o+d.height>h.height&&(o=h.height-d.height),{top:o}},horizontal:function(i){var e=t.util.getMousePosition(i),o=e.clientX-n.left;return 0>o?o=0:o+d.width>h.width&&(o=h.width-d.width),{left:o}}},w=x[r](l);o.css(w);var y=e[r].call(a,w,{_content_width:f,_content_height:p,_panel_width:g,_panel_height:c,_horizontal_scroller_width:u,_vertical_scroller_height:s,verticalScrollBarHeight:b,horizontalScrollBarWidth:v});"horizontal"===r&&t.header.scrollTo.call(a,y),t.body.scrollTo.call(a,y,r)},on:function(i,o,l){var a=this,n=o.position(),d={width:o.width(),height:o.height()},h={width:i.innerWidth(),height:i.innerHeight()},s=a.$.scroller.vertical.innerHeight(),c=a.$.panel.body.height(),u=a.$.scroller.horizontal.innerWidth(),g=a.$.panel.body.width(),p=a.xvar.scrollContentHeight,f=a.xvar.scrollContentWidth,b=a.$.scroller["vertical-bar"].height(),v=a.$.scroller["horizontal-bar"].width(),x={vertical:function(i){var e=t.util.getMousePosition(i);a.xvar.__da=e.clientY-a.xvar.mousePosition.clientY;var o=n.top+a.xvar.__da;return 0>o?o=0:o+d.height>h.height&&(o=h.height-d.height),{top:o}},horizontal:function(i){var e=t.util.getMousePosition(i);a.xvar.__da=e.clientX-a.xvar.mousePosition.clientX;var o=n.left+a.xvar.__da;return 0>o?o=0:o+d.width>h.width&&(o=h.width-d.width),{left:o}}};a.xvar.__da=0,jQuery(document.body).bind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(i){var r=x[l](i);o.css(r);var n=e[l].call(a,r,{_content_width:f,_content_height:p,_panel_width:g,_panel_height:c,_horizontal_scroller_width:u,_vertical_scroller_height:s,verticalScrollBarHeight:b,horizontalScrollBarWidth:v});"horizontal"===l&&t.header.scrollTo.call(a,n),t.body.scrollTo.call(a,n,l)}).bind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(t){r.off.call(a)}).bind("mouseleave.ax5grid-"+this.instanceId,function(t){r.off.call(a)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind(t.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(t.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")},wheel:function(i){var e,o,r=this,l=r.$.panel.body.height(),n=r.$.panel.body.width(),d=r.xvar.scrollContentHeight,h=r.xvar.scrollContentWidth,s=r.$.panel["body-scroll"].position(),c=!1,u=!1;return e=s.left-i.x,o=s.top-i.y,o>=0?(o=0,c=!0):l-d>=o?(o=l-d,o>=0&&(o=0),c=!0):0==i.y&&(c=!0),e>=0?(e=0,u=!0):n-h>=e?(e=n-h,e>=0&&(e=0),u=!0):0==i.x&&(u=!0),t.header.scrollTo.call(this,{left:e}),t.body.scrollTo.call(this,{left:e,top:o}),a.call(this),!c||!u}},l=function(){var e=4;this.$.scroller["vertical-bar"].css({width:this.config.scroller.size-(e+1),left:e/2}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size-(e+1),top:e/2}),this.$.scroller["vertical-bar"].bind(t.util.ENM.mousedown,function(i){this.xvar.mousePosition=t.util.getMousePosition(i),r.on.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical")}.bind(this)).bind("dragstart",function(t){return i.stopEvent(t),!1}),this.$.scroller.vertical.bind("click",function(t){t.target&&"vertical"==t.target.getAttribute("data-ax5grid-scroller")&&r.click.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",t)}.bind(this)),this.$.scroller["horizontal-bar"].bind(t.util.ENM.mousedown,function(i){this.xvar.mousePosition=t.util.getMousePosition(i),r.on.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal")}.bind(this)).bind("dragstart",function(t){return i.stopEvent(t),!1}),this.$.scroller.horizontal.bind("click",function(t){t.target&&"horizontal"==t.target.getAttribute("data-ax5grid-scroller")&&r.click.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",t)}.bind(this)),this.$.container.body.bind("mousewheel DOMMouseScroll",function(t){var e=t.originalEvent,o={x:0,y:0};e.detail?o.y=10*e.detail:"undefined"==typeof e.deltaY?(o.y=-e.wheelDelta,o.x=0):(o.y=e.deltaY,o.x=e.deltaX),r.wheel.call(this,o)&&i.stopEvent(t)}.bind(this))},a=function(){var t=this.$.scroller.vertical.height(),i=this.$.scroller.horizontal.width(),e=this.$.panel.body.height(),r=this.$.panel.body.width(),l=this.xvar.scrollContentHeight,a=this.xvar.scrollContentWidth,n=e*t/l,d=r*i/a;n<this.config.scroller.barMinSize&&(n=this.config.scroller.barMinSize),d<this.config.scroller.barMinSize&&(d=this.config.scroller.barMinSize),this.$.scroller["vertical-bar"].css({top:o.vertical.call(this,this.$.panel["body-scroll"].position().top,{_content_width:a,_content_height:l,_panel_width:r,_panel_height:e,_horizontal_scroller_width:i,_vertical_scroller_height:t,verticalScrollBarHeight:n,horizontalScrollBarWidth:d}),height:n}),this.$.scroller["horizontal-bar"].css({left:o.horizontal.call(this,this.$.panel["body-scroll"].position().left,{_content_width:a,_content_height:l,_panel_width:r,_panel_height:e,_horizontal_scroller_width:i,_vertical_scroller_height:t,verticalScrollBarHeight:n,horizontalScrollBarWidth:d}),width:d}),t=null,i=null,e=null,r=null,l=null,a=null,n=null,d=null};t.scroller={init:l,resize:a}}(),function(){var t=ax5.ui.grid,i='<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header">\n                    <div data-ax5grid-panel-scroll="header"></div>\n                </div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body">\n                    <div data-ax5grid-panel-scroll="top-body"></div>\n                </div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body">\n                    <div data-ax5grid-panel-scroll="aside-body"></div>\n                </div>\n                <div data-ax5grid-panel="left-body">\n                    <div data-ax5grid-panel-scroll="left-body"></div>\n                </div>\n                <div data-ax5grid-panel="body">\n                    <div data-ax5grid-panel-scroll="body"></div>\n                </div>\n                <div data-ax5grid-panel="right-body">\n                  <div data-ax5grid-panel-scroll="right-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body">\n                    <div data-ax5grid-panel-scroll="bottom-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n            <div data-ax5grid-container="scroller">\n                <div data-ax5grid-scroller="vertical">\n                    <div data-ax5grid-scroller="vertical-bar"></div>    \n                </div>\n                <div data-ax5grid-scroller="horizontal">\n                    <div data-ax5grid-scroller="horizontal-bar"></div>\n                </div>\n                <div data-ax5grid-scroller="corner"></div>\n            </div>\n        </div>';t.tmpl={main:i,get:function(i,e){return ax5.mustache.render(t.tmpl[i],e)}}}(),function(){var t=ax5.ui.grid,i=function(t,i){for(var e={rows:[]},o={rows:[]},r=0,l=t.rows.length;l>r;r++){var a=t.rows[r];e.rows[r]={cols:[]},o.rows[r]={cols:[]};for(var n=0,d=a.cols.length;d>n;n++){var h=jQuery.extend({},a.cols[n]),s=h.colIndex,c=h.colIndex+h.colspan;if(i>s)if(i>=c)e.rows[r].cols.push(h);else{var u=jQuery.extend({},h),g=jQuery.extend({},u);u.colspan=i-u.colIndex,g.colIndex=i,g.colspan=h.colspan-u.colspan,e.rows[r].cols.push(u),o.rows[r].cols.push(g)}else o.rows[r].cols.push(h)}}return{leftData:e,rightData:o}},e=function(t){var i="changedTouches"in t.originalEvent?t.originalEvent.changedTouches[0]:t;return{clientX:i.pageX,clientY:i.pageY}},o={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"};t.util={divideTableByFrozenColumnIndex:i,getMousePosition:e,ENM:o}}();