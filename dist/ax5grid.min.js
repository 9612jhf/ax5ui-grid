"use strict";!function(t,a){var n,i=ax5.util,e=function(){var e;a&&a.call(this),this.name="ax5grid",this.version="0.0.2",this.config={clickEventName:"click",theme:"default",animateTime:250,frozenColumnIndex:0,frozenRowIndex:0},this.data=[],e=this.config;var o=function(){var t={instanceId:this.id};return this.$target.html(n.tmpl.get("main",t)),this.$={container:{header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="rop-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')}},this},d=function(t){return this.columns=i.deepCopy(t),this};this.init=function(t){this.onStateChanged=e.onStateChanged,this.onClick=e.onClick;var a=this.gridConfig=jQuery.extend(!0,{},e,t);return a.target?(this.$target=jQuery(a.target),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+ax5.getGuid(),this.$target.data("data-ax5grid-id",a.id)),function(t){i.isObject(t)&&!t.error&&(a=jQuery.extend(!0,a,t))}(i.parseJson(this.$target.attr("data-ax5grid-config"),!0)),o.call(this),d.call(this,a.columns),n.header.init.call(this),n.header.repaint.call(this),n.body.init.call(this),void n.body.repaint.call(this)):(console.log(ax5.info.getError("ax5grid","401","init")),this)},this.align=function(){return this},this.setData=function(t){return n.data.set.call(this,t),n.body.repaint.call(this),this},this.main=function(){t.grid_instance=t.grid_instance||[],t.grid_instance.push(this),arguments&&i.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};n=t.grid=function(){return i.isFunction(a)&&(e.prototype=new a),e}()}(ax5.ui,ax5.ui.root),function(t){var a=function(){this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowTable=n.call(this,this.columns)},n=function(t){var a={rows:[]},n=0,i=function e(t,i,o){for(var d={cols:[]},r=0,s=t.length,l=(function g(t){for(var a=0,r=t.length;r>a;a++){var s=t[a],l=1;s.hidden||("key"in s?(s.colspan=1,s.rowspan=1,s.rowIndex=i,s.colIndex=function(){return o?(n=o.colIndex+a+1,o.colIndex+a):n++}(),d.cols.push(s),"columns"in s&&(l=e(s.columns,i+1,s)),s.colspan=l):"columns"in s&&g(s.columns,i))}});s>r;r++){var h=t[r],c=1;h.hidden||("key"in h?(h.colspan=1,h.rowspan=1,h.rowIndex=i,h.colIndex=function(){return o?(n=o.colIndex+r+1,o.colIndex+r):n++}(),d.cols.push(h),"columns"in h&&(c=e(h.columns,i+1,h)),h.colspan=c):"columns"in h&&l(h.columns,i))}return d.cols.length>0?(a.rows[i]||(a.rows[i]={cols:[]}),a.rows[i].cols=a.rows[i].cols.concat(d.cols),d.cols.length-1+c):c};return i(t,0),function(){for(var t=0,n=a.rows.length;n>t;t++)for(var i=a.rows[t],e=0,o=i.cols.length;o>e;e++){var d=i.cols[e];"columns"in d||(d.rowspan=n-t)}}(),a},i=function(){var a=t.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.config.frozenColumnIndex),n=this.leftBodyRowData=a.leftData,i=this.bodyRowData=a.rightData,e=this.data,o=function(){for(var t=this.cols.length;t--;)this.cols[t]["@dataIndex"]=this["@dataIndex"];return this.cols},d=function(){return{value:e[this["@dataIndex"]][this.key]||"&nbsp;"}};this.$.panel["left-body"].html(t.tmpl.get("body",{list:e,"@rows":function(){for(var t=n.rows.length;t--;)n.rows[t]["@dataIndex"]=this["@i"];return n.rows},"@cols":o,"@columnValue":d})),this.$.panel.body.html(t.tmpl.get("body",{list:e,"@rows":function(){for(var t=i.rows.length;t--;)i.rows[t]["@dataIndex"]=this["@i"];return i.rows},"@cols":o,"@columnValue":d}))},e=function(){};t.body={init:a,repaint:i,setData:e}}(ax5.ui.grid),function(t){var a=ax5.util,n=function(){},i=function(t){return this.data=a.deepCopy(t),this},e=function(){};t.data={init:n,set:i,get:e}}(ax5.ui.grid),function(t){var a=function(){this.headerTable={},this.leftHeaderData={},this.headerData={},this.rightHeaderData={},this.headerTable=n.call(this,this.columns)},n=function(t){var a={rows:[]},n=0,i=function e(t,i,o){for(var d={cols:[]},r=0,s=t.length;s>r;r++){var l=t[r],h=1;l.hidden||(l.colspan=1,l.rowspan=1,l.rowIndex=i,l.colIndex=function(){return o?(n=o.colIndex+r+1,o.colIndex+r):n++}(),d.cols.push(l),"columns"in l&&(h=e(l.columns,i+1,l)),l.colspan=h)}return d.cols.length>0?(a.rows[i]||(a.rows[i]={cols:[]}),a.rows[i].cols=a.rows[i].cols.concat(d.cols),d.cols.length-1+h):h};return i(t,0),function(){for(var t=0,n=a.rows.length;n>t;t++)for(var i=a.rows[t],e=0,o=i.cols.length;o>e;e++){var d=i.cols[e];"columns"in d||(d.rowspan=n-t)}}(),a},i=function(){var a=t.util.divideTableByFrozenColumnIndex(this.headerTable,this.config.frozenColumnIndex);this.leftHeaderData=a.leftData,this.headerData=a.rightData,this.config.frozenColumnIndex>0&&this.$.panel["left-header"].html(t.tmpl.get("header",{table:this.leftHeaderData})),this.$.panel.header.html(t.tmpl.get("header",{table:this.headerData})),this.config.rowSum&&this.$.panel["right-header"].html(t.tmpl.get("header",{table:this.rightHeaderData}))};t.header={init:a,repaint:i}}(ax5.ui.grid),function(t){var a=function(){};t.scroller={init:a}}(ax5.ui.grid),function(t){var a='<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header"></div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body"></div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body"></div>\n                <div data-ax5grid-panel="left-body"></div>\n                <div data-ax5grid-panel="body"></div>\n                <div data-ax5grid-panel="right-body"></div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body"></div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n        </div>',n='<table border="1" style="">\n            {{#table.rows}}\n            <tr>\n                {{#cols}}\n                <td colspan="{{colspan}}" rowspan="{{rowspan}}">{{{label}}}</td>\n                {{/cols}}\n            </tr>\n            {{/table.rows}}\n        </table>\n        ',i='<table border="1" style="">\n            {{#list}}\n            {{#@rows}}\n            <tr>\n                {{#@cols}}\n                <td colspan="{{colspan}}" rowspan="{{rowspan}}">{{#@columnValue}}{{{value}}}{{/@columnValue}}</td>\n                {{/@cols}}\n            </tr>\n            {{/@rows}}\n            {{/list}}\n        </table>\n        ';t.tmpl={main:a,header:n,body:i,get:function(a,n){return ax5.mustache.render(t.tmpl[a],n)}}}(ax5.ui.grid),function(t){var a=function(t,a){for(var n={rows:[]},i={rows:[]},e=0,o=t.rows.length;o>e;e++){var d=t.rows[e];n.rows[e]={cols:[]},i.rows[e]={cols:[]};for(var r=0,s=d.cols.length;s>r;r++){var l=jQuery.extend({},d.cols[r]),h=l.colIndex,c=l.colIndex+l.colspan;if(a>h)if(a>=c)n.rows[e].cols.push(l);else{var g=jQuery.extend({},l),u=jQuery.extend({},g);g.colspan=a-g.colIndex,u.colIndex=a,u.colspan=l.colspan-g.colspan,n.rows[e].cols.push(g),i.rows[e].cols.push(u)}else i.rows[e].cols.push(l)}}return{leftData:n,rightData:i}};t.util={divideTableByFrozenColumnIndex:a}}(ax5.ui.grid);